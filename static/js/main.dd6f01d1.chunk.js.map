{"version":3,"sources":["state/useStore.js","models/spaceship.gltf","textures/noise.png","textures/enginetextureflip.png","components/Ship.js","constants/index.js","textures/grid-red.png","textures/grid-orange.png","textures/grid-green.png","textures/grid-blue.png","textures/grid-purple.png","textures/grid-pink.png","textures/grid-rainbow.png","components/Ground.js","textures/galaxy.jpg","components/Skybox.js","util/randomInRange.js","util/distance2D.js","components/Cubes.js","components/Walls.js","util/generateFixedCubes.js","components/FixedCubes.js","components/Arch.js","textures/galaxyTextureBW.png","components/Hyperspace.js","components/CubeTunnel.js","components/Effects.js","components/KeyboardControls.js","components/GameState.js","components/GlobalColor.js","audio/intro-loop.mp3","audio/main-nodrums.mp3","audio/main-onlydrums.mp3","components/Music.js","audio/speedup.mp3","components/Sound.js","components/html/CustomLoader.js","components/html/Author.js","components/html/Overlay.js","components/html/Hud.js","textures/cuberun-logo.png","components/html/GameOverScreen.js","components/CubeWorld.js","index.js"],"names":["useStore","create","set","get","_JSON$parse","score","level","gameOver","gameStarted","musicEnabled","JSON","parse","localStorage","getItem","isSpeedingUp","controls","left","right","directionalLight","createRef","camera","ship","sun","sfx","hasInteracted","setHasInteracted","state","setIsSpeedingUp","speedingUp","incrementLevel","setScore","setGameStarted","started","setGameOver","over","enableMusic","enabled","mutation","gameSpeed","desiredSpeed","horizontalVelocity","colorLevel","shouldShiftItems","currentMusicLevel","currentLevelLength","globalColor","Color","v","Vector3","ShipModel","props","_ref","children","nodes","materials","useGLTF","shipModel","s","pointLight","useRef","innerConeExhaust","coneExhaust","outerConeExhaust","noise","useTexture","noiseTexture","exhaust","engineTexture","leftWingTrail","rightWingTrail","bodyDetail","clock","useThree","controlsRef","getState","useEffect","subscribe","current","useLayoutEffect","rotation","Math","PI","position","lookAt","x","y","z","material","visible","wrapS","wrapT","MirroredRepeatWrapping","repeat","anisotropy","innerLathe","useState","Vector2","mediumLathe","lathe","innerConeScaleFactor","useFrame","delta","accelDelta","time","getElapsedTime","slowSine","sin","medSine","fastSine","scale","abs","max","min","intensity","map","offset","scaleFactor","color","_jsxs","_Fragment","_jsx","ref","decay","distance","PerspectiveCamera","makeDefault","fov","castShadow","receiveShadow","dispose","geometry","Ship_Body","attach","metalness","reflectivity","clearcoat","roughness","Ship_Body_1","Chassis","Ship_Body_2","Ship_Body_3","Ship_Body_4","args","transparent","opacity","emissive","emissiveIntensity","alphaMap","Loading","Ship","_ref2","Suspense","fallback","preload","PLANE_SIZE","LEVEL_SIZE","LEFT_BOUND","RIGHT_BOUND","CUBE_SIZE","CUBE_AMOUNT","INITIAL_GAME_SPEED","GAME_SPEED_MULTIPLIER","WALL_RADIUS","COLORS","name","hex","three","THREE","TEXTURE_SIZE","MOVE_DISTANCE","Ground","ground","groundTwo","plane","planeTwo","textures","gridPink","gridRed","gridOrange","gridGreen","gridBlue","gridPurple","gridRainbow","forEach","texture","RepeatWrapping","moveCounter","lastMove","round","length","uuid","emissiveMap","LoadingGround","CompleteGround","Sun","sunColor","useMemo","fog","Sky","galaxyTexture","sky","stars","Stars","radius","depth","count","factor","saturation","fade","side","BackSide","Fog","near","far","Skybox","randomInRange","from","to","floor","random","distance2D","p1x","p1y","p2x","p2y","a","b","sqrt","negativeBound","positiveBound","InstancedCubes","mesh","dummy","Object3D","cubes","temp","i","push","diamondStart","diamondEnd","isOutsideDiamond","cube","updateMatrix","setMatrixAt","matrix","instanceMatrix","needsUpdate","Walls","rightWall","leftWall","Cone","segments","makeWall","hasGap","arguments","undefined","gapSize","wallCoordinates","Array","index","splice","spliceFactor","generateDiamond","initialWall","tunnel","diamond","size","wallEndOffset","tunnelEndOffset","outerLeftWall","outerRightWall","innerSize","innerLeftWall","innerRightWall","firstDiamond","secondDiamond","coordinates","makeDiamond","tunnelCoords","diamondCoords","_tunnelCoords$i","_tunnelCoords$i2","currentLevelMinusDiamondStart","Arch","arches","arch1","arch2","arch3","arch4","arch5","arch6","arch7","arch8","arch9","arch10","levelColor","base","HyperspaceTunnel","tunnel2","tunnels","repeatX","repeatY","lathe2","lowerBound","upperBound","prevLowerBound","prevUpperBound","SuspendedHyperspaceTunnel","CubeTunnel","FixedCubes","Hyperspace","Effects","composer","scene","gl","bloomFactor","setSize","width","height","bloom","passes","strength","render","attachArray","FXAAShader","extend","EffectComposer","ShaderPass","RenderPass","UnrealBloomPass","SSAOPass","AfterimagePass","pressed","useKeys","target","event","up","downHandler","e","indexOf","key","isRepeating","keyCode","upHandler","window","addEventListener","passive","removeEventListener","KeyboardControls","shipSelector","setScoreSelector","gameStartedSelector","setIsSpeedingUpSelector","setGameOverSelector","GameState","GlobalColor","materialRef","colorAlpha","previousLevel","rainbowAlpha1","rainbowAlpha2","rainbowAlpha3","rainbowAlpha4","rainbowAlpha5","rainbowSpeed","lerpColors","Music","introPlayer","themePlayer","drumPlayer","soundOrigin","listener","AudioListener","introTheme","useLoader","AudioLoader","introSong","mainTheme","mainSong","mainThemeDrums","mainSongDrums","themeFilter","audioAnalyzer","introVolume","themeVolume","drumVolume","introPlaying","startCrossfade","context","resume","setBuffer","createBiquadFilter","type","frequency","value","setFilter","AudioAnalyser","_introPlayer$current","_themePlayer$current","isPlaying","stop","_introPlayer$current2","play","setLoop","cam","add","remove","setPlaybackRate","audioLevel","MathUtils","inverseLerp","getFrequencyData","currentTime","toFixed","setVolume","SuspenseMusic","Sound","sound","speedUpSound","speedUp","SuspenseSound","defaultDataInterpolation","p","CustomLoader","active","progress","dataInterpolation","progressRef","React","rafRef","progressSpanRef","updateProgress","innerText","requestAnimationFrame","cancelAnimationFrame","style","styles","container","inner","bar","transform","marginTop","data","display","alignItems","justifyContent","transition","zIndex","textAlign","borderRadius","boxShadow","border","background","transformOrigin","fontVariantNumeric","fontSize","fontFamily","whiteSpace","textShadow","Author","className","rel","href","Overlay","shown","setShown","opaque","setOpaque","hasLoaded","setHasLoaded","useProgress","t","setTimeout","clearTimeout","setItem","stringify","onClick","src","alt","handleStart","handleMusic","Loader","getSpeed","getScore","Hud","showControls","setShowControls","setLeftPressed","setRightPressed","then","Date","now","speedRef","scoreRef","currentSpeed","currentScore","addEffect","oncontextmenu","preventDefault","stopPropagation","isMobile","onTouchStart","onTouchEnd","GameOverScreen","previousScores","fill","highScores","setHighscores","some","previousScore","sortedScores","sort","resortedScores","cubeRunLogo","newScore","textDecoration","handleRestart","location","reload","CubeWorld","bgColor","Canvas","antialias","alpha","mode","dpr","object","Cubes","groundColor","Preload","all","ReactDOM","createRoot","document","getElementById","StrictMode"],"mappings":"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","file":"static/js/main.dd6f01d1.chunk.js","sourcesContent":["import { Color } from 'three'\r\nimport { createRef } from 'react'\r\nimport create from 'zustand'\r\n\r\nconst useStore = create((set, get) => {\r\n\r\n  return {\r\n    set,\r\n    get,\r\n    score: 0,\r\n    level: 0,\r\n    gameOver: false,\r\n    gameStarted: false,\r\n    musicEnabled: JSON.parse(localStorage.getItem('musicEnabled')) ?? false,\r\n    isSpeedingUp: false,\r\n    controls: {\r\n      left: false,\r\n      right: false,\r\n    },\r\n    directionalLight: createRef(),\r\n    camera: createRef(),\r\n    ship: createRef(),\r\n    sun: createRef(),\r\n    sfx: createRef(),\r\n    hasInteracted: false,\r\n    setHasInteracted: () => set(state => ({ hasInteracted: true })),\r\n    setIsSpeedingUp: (speedingUp) => set(state => ({ isSpeedingUp: speedingUp })),\r\n    incrementLevel: () => set(state => ({ level: state.level + 1 })),\r\n    setScore: (score) => set(state => ({ score: score })),\r\n    setGameStarted: (started) => set(state => ({ gameStarted: started })),\r\n    setGameOver: (over) => set(state => ({ gameOver: over })),\r\n    enableMusic: (enabled) => set(state => ({ musicEnabled: enabled }))\r\n  }\r\n})\r\n\r\nconst mutation = {\r\n  gameOver: false,\r\n  score: 0,\r\n  gameSpeed: 0.0,\r\n  desiredSpeed: 0.0,\r\n  horizontalVelocity: 0,\r\n  colorLevel: 0,\r\n  shouldShiftItems: false,\r\n  currentMusicLevel: 0,\r\n  currentLevelLength: 0,\r\n  globalColor: new Color()\r\n}\r\n\r\nexport { useStore, mutation }","export default __webpack_public_path__ + \"static/media/spaceship.a23b62cf.gltf\";","export default __webpack_public_path__ + \"static/media/noise.2793ebd0.png\";","export default __webpack_public_path__ + \"static/media/enginetextureflip.d0f77b17.png\";","import React, { useRef, useLayoutEffect, useEffect, Suspense, useState } from 'react'\r\nimport { useFrame, useThree } from '@react-three/fiber'\r\nimport { useGLTF, PerspectiveCamera, useTexture } from '@react-three/drei'\r\nimport { MirroredRepeatWrapping, Vector2, Vector3 } from 'three'\r\n\r\nimport shipModel from '../models/spaceship.gltf'\r\n\r\nimport noiseTexture from '../textures/noise.png'\r\nimport engineTexture from '../textures/enginetextureflip.png'\r\n\r\n\r\nimport { useStore, mutation } from '../state/useStore'\r\n\r\nconst v = new Vector3()\r\n\r\nfunction ShipModel(props, { children }) {\r\n  const { nodes, materials } = useGLTF(shipModel, \"https://www.gstatic.com/draco/versioned/decoders/1.4.0/\")\r\n  // tie ship and camera ref to store to allow getting at them elsewhere\r\n  const ship = useStore((s) => s.ship)\r\n  const camera = useStore((s) => s.camera)\r\n\r\n  const pointLight = useRef()\r\n\r\n  const innerConeExhaust = useRef()\r\n  const coneExhaust = useRef()\r\n  const outerConeExhaust = useRef()\r\n\r\n  const noise = useTexture(noiseTexture)\r\n  const exhaust = useTexture(engineTexture)\r\n\r\n  const leftWingTrail = useRef()\r\n  const rightWingTrail = useRef()\r\n\r\n  const bodyDetail = useRef()\r\n\r\n  const { clock } = useThree()\r\n\r\n  const gameStarted = useStore(s => s.gameStarted)\r\n  const gameOver = useStore(s => s.gameOver)\r\n\r\n  // subscribe to controller updates on mount\r\n  const controlsRef = useRef(useStore.getState().controls)\r\n  useEffect(() => useStore.subscribe(\r\n    controls => (controlsRef.current = controls),\r\n    state => state.controls\r\n  ), [])\r\n\r\n  useLayoutEffect(() => {\r\n    camera.current.rotation.set(0, Math.PI, 0)\r\n    camera.current.position.set(0, 4, -9) // 0, 1.5, -8\r\n    camera.current.lookAt(v.set(ship.current.position.x, ship.current.position.y, ship.current.position.z + 10)) // modify the camera tracking to look above the center of the ship\r\n\r\n    camera.current.rotation.z = Math.PI\r\n    ship.current.rotation.y = Math.PI\r\n  }, [ship, camera])\r\n\r\n  // turn off movement related parts when we arent moving\r\n  useLayoutEffect(() => {\r\n    if (!gameStarted || gameOver) {\r\n      innerConeExhaust.current.material.visible = false\r\n      coneExhaust.current.material.visible = false\r\n      outerConeExhaust.current.material.visible = false\r\n      leftWingTrail.current.material.visible = false\r\n      rightWingTrail.current.material.visible = false\r\n      pointLight.current.visible = false\r\n    } else {\r\n      innerConeExhaust.current.material.visible = true\r\n      coneExhaust.current.material.visible = true\r\n      outerConeExhaust.current.material.visible = true\r\n      leftWingTrail.current.material.visible = true\r\n      rightWingTrail.current.material.visible = true\r\n      pointLight.current.visible = true\r\n    }\r\n  }, [gameStarted, gameOver])\r\n\r\n  useLayoutEffect(() => {\r\n    noise.wrapS = noise.wrapT = MirroredRepeatWrapping\r\n    noise.repeat.set(1, 1)\r\n    noise.anisotropy = 16\r\n\r\n    exhaust.wrapS = exhaust.wrapT = MirroredRepeatWrapping\r\n    exhaust.repeat.set(1, 1)\r\n    exhaust.anisotropy = 16\r\n  }, [noise, exhaust])\r\n\r\n  const [innerLathe] = useState(() => {\r\n    const points = [\r\n      new Vector2(0.2, 0.8),\r\n      new Vector2(0.1, 0),\r\n      new Vector2(0.3, 1.5),\r\n      new Vector2(0.4, 1.9),\r\n      new Vector2(0.01, 7)]\r\n\r\n    return points\r\n  })\r\n\r\n  const [mediumLathe] = useState(() => {\r\n    const points = [\r\n      new Vector2(0.2, 0),\r\n      new Vector2(0.5, 2),\r\n      new Vector2(0.01, 8)]\r\n\r\n    return points\r\n  })\r\n\r\n  const [lathe] = useState(() => {\r\n    const points = [\r\n      new Vector2(0.01, 0),\r\n      new Vector2(0.3, 0.8),\r\n      new Vector2(0.4, 1.5),\r\n      new Vector2(0.5, 1.9),\r\n      new Vector2(0.01, 9)]\r\n\r\n    return points\r\n  })\r\n\r\n  const innerConeScaleFactor = useRef(0.7)\r\n\r\n  useFrame((state, delta) => {\r\n    const accelDelta = 1 * delta * 2 // 1.5\r\n\r\n    const time = clock.getElapsedTime()\r\n\r\n    const slowSine = Math.sin(time * 5)\r\n    const medSine = Math.sin(time * 10)\r\n    const fastSine = Math.sin(time * 15)\r\n\r\n    const { left, right } = controlsRef.current\r\n\r\n    rightWingTrail.current.scale.x = fastSine / 50\r\n    rightWingTrail.current.scale.y = medSine / 50\r\n    leftWingTrail.current.scale.x = fastSine / 50\r\n    leftWingTrail.current.scale.y = medSine / 50\r\n\r\n    // Forward Movement\r\n    ship.current.position.z -= mutation.gameSpeed * delta * 165\r\n\r\n\r\n    // Lateral Movement\r\n    if (mutation.gameOver) {\r\n      mutation.horizontalVelocity = 0\r\n    }\r\n    ship.current.position.x += mutation.horizontalVelocity * delta * 165\r\n\r\n    // Curving during turns\r\n    ship.current.rotation.z = mutation.horizontalVelocity * 1.5\r\n    ship.current.rotation.y = Math.PI - mutation.horizontalVelocity * 0.4\r\n    ship.current.rotation.x = -Math.abs(mutation.horizontalVelocity) / 10 // max/min velocity is -0.5/0.5, divide by ten to get our desired max rotation of 0.05\r\n\r\n    // Ship Jitter - small incidental movements\r\n    ship.current.position.y -= slowSine / 200\r\n    ship.current.rotation.x += slowSine / 100\r\n    ship.current.rotation.z += Math.sin(time * 4) / 100\r\n\r\n    // pointLight follow along \r\n    pointLight.current.position.z = ship.current.position.z + 1\r\n    pointLight.current.position.x = ship.current.position.x\r\n    pointLight.current.position.y -= slowSine / 80\r\n\r\n    // uncomment to unlock camera\r\n    camera.current.position.z = ship.current.position.z + 13.5 // + 13.5\r\n    camera.current.position.y = ship.current.position.y + 5 // 5\r\n    camera.current.position.x = ship.current.position.x\r\n\r\n    camera.current.rotation.y = Math.PI\r\n\r\n    if ((left && right) || (!left && !right)) {\r\n      if (mutation.horizontalVelocity < 0) {\r\n        if (mutation.horizontalVelocity + accelDelta > 0) {\r\n          mutation.horizontalVelocity = 0\r\n        } else {\r\n          mutation.horizontalVelocity += accelDelta\r\n        }\r\n      }\r\n\r\n      if (mutation.horizontalVelocity > 0) {\r\n        if (mutation.horizontalVelocity - accelDelta < 0) {\r\n          mutation.horizontalVelocity = 0\r\n        } else {\r\n          mutation.horizontalVelocity -= accelDelta\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!mutation.gameOver && mutation.gameSpeed > 0) {\r\n      if ((left && !right)) {\r\n        mutation.horizontalVelocity = Math.max(-0.7 /* -0.5 */, mutation.horizontalVelocity - accelDelta)\r\n\r\n        // wing trail\r\n        rightWingTrail.current.scale.x = fastSine / 30\r\n        rightWingTrail.current.scale.y = slowSine / 30\r\n        leftWingTrail.current.scale.x = fastSine / 200\r\n        leftWingTrail.current.scale.y = slowSine / 200\r\n      }\r\n\r\n      if ((!left && right)) {\r\n        mutation.horizontalVelocity = Math.min(0.7 /* 0.7 */, mutation.horizontalVelocity + accelDelta)\r\n\r\n        // wing trail\r\n        leftWingTrail.current.scale.x = fastSine / 30\r\n        leftWingTrail.current.scale.y = slowSine / 30\r\n        rightWingTrail.current.scale.x = fastSine / 200\r\n        rightWingTrail.current.scale.y = slowSine / 200\r\n      }\r\n    }\r\n\r\n    pointLight.current.intensity = 20 - (fastSine / 15)\r\n\r\n    outerConeExhaust.current.material.map.offset.y += 0.01 * (0.4 + mutation.gameSpeed) * delta * 165\r\n    coneExhaust.current.material.map.offset.y -= 0.01 * (0.4 + mutation.gameSpeed) * delta * 165\r\n\r\n    if (mutation.desiredSpeed > mutation.gameSpeed) {\r\n      pointLight.current.intensity = 30 - (fastSine / 15)\r\n\r\n      if (innerConeScaleFactor.current < 0.95) {\r\n        if (innerConeScaleFactor.current + 0.005 * delta * 165 > 0.95) {\r\n          innerConeScaleFactor.current = 0.95\r\n        } else {\r\n          innerConeScaleFactor.current += 0.005 * delta * 165\r\n        }\r\n      }\r\n    } else {\r\n      if (innerConeScaleFactor.current > 0.7) {\r\n        if (innerConeScaleFactor.current - 0.005 * delta * 165 < 0.7) {\r\n          innerConeScaleFactor.current = 0.7\r\n        } else {\r\n          innerConeScaleFactor.current -= 0.005 * delta * 165\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    const scaleFactor = mutation.currentMusicLevel > 0.8 ? mutation.currentMusicLevel + 0.2 : 1\r\n\r\n    innerConeExhaust.current.scale.z = (fastSine / 15)\r\n    innerConeExhaust.current.scale.x = (innerConeScaleFactor.current + fastSine / 15) * scaleFactor\r\n    coneExhaust.current.scale.z = (fastSine / 15)\r\n    coneExhaust.current.scale.x = (0.85 + fastSine / 15) * scaleFactor\r\n    outerConeExhaust.current.scale.z = (0.9 + fastSine / 15)\r\n    outerConeExhaust.current.scale.x = (0.9 + fastSine / 15) * scaleFactor\r\n\r\n    bodyDetail.current.material.color = mutation.globalColor\r\n  })\r\n\r\n  return (\r\n    <>\r\n      <pointLight ref={pointLight} color=\"tomato\" decay={10} distance={40} intensity={5} position={[0, 3, -5]} />\r\n      <PerspectiveCamera makeDefault ref={camera} fov={75} rotation={[0, Math.PI, 0]} position={[0, 10, -10]} />\r\n      <group castShadow receiveShadow ref={ship} position={[0, 3, -10]} {...props} dispose={null}>\r\n        {children}\r\n        <mesh geometry={nodes.Ship_Body.geometry}>\r\n          <meshStandardMaterial attach=\"material\" color=\"lightblue\" metalness={0.8} reflectivity={1} clearcoat={1} roughness={0} />\r\n        </mesh>\r\n        <mesh receiveShadow castShadow geometry={nodes.Ship_Body_1.geometry} material={materials.Chassis} />\r\n        <mesh geometry={nodes.Ship_Body_2.geometry}>\r\n          <meshBasicMaterial attach=\"material\" color=\"orange\" />\r\n        </mesh>\r\n        <mesh receiveShadow castShadow geometry={nodes.Ship_Body_3.geometry} material={materials['Gray Metal']} />\r\n        <mesh ref={bodyDetail} geometry={nodes.Ship_Body_4.geometry}>\r\n          <meshLambertMaterial attach=\"material\" color=\"white\" />\r\n        </mesh>\r\n        <mesh ref={leftWingTrail} scale={[0.1, 0.05, 2]} position={[1.4, 0.2, -7]}>\r\n          <dodecahedronBufferGeometry args={[1.5, 3]} />\r\n          <meshBasicMaterial transparent opacity={0.8} color=\"white\" />\r\n        </mesh>\r\n        <mesh ref={rightWingTrail} scale={[0.1, 0.05, 2]} position={[-1.4, 0.2, -7]}>\r\n          <dodecahedronBufferGeometry args={[1.5, 3]} />\r\n          <meshBasicMaterial transparent opacity={0.8} color=\"white\" />\r\n        </mesh>\r\n        <mesh visible={true} ref={innerConeExhaust} position={[0, -0.3, 0.3]} rotation={[Math.PI / 2, 0, Math.PI]}>\r\n          <latheBufferGeometry args={[innerLathe, 20]} />\r\n          <meshLambertMaterial transparent opacity={1} color=\"white\" />\r\n        </mesh>\r\n        <mesh visible={true} ref={coneExhaust} position={[0, -0.3, 0.25]} rotation={[Math.PI / 2, 0, Math.PI]}>\r\n          <latheBufferGeometry args={[mediumLathe, 30]} />\r\n          <meshLambertMaterial transparent opacity={0.8} map={noise} color={0xAAAAAA} emissive=\"red\" emissiveIntensity={1} />\r\n        </mesh>\r\n        <mesh visible={true} ref={outerConeExhaust} position={[0, -0.3, 0]} rotation={[Math.PI / 2, 0, Math.PI]}>\r\n          <latheBufferGeometry args={[lathe, 50]} />\r\n          <meshLambertMaterial transparent alphaMap={exhaust} map={exhaust} color=\"hotpink\" />\r\n        </mesh>\r\n      </group>\r\n    </>\r\n  )\r\n}\r\n\r\n\r\nuseGLTF.preload(shipModel, \"https://www.gstatic.com/draco/versioned/decoders/1.4.0/\")\r\n\r\nfunction Loading() {\r\n  return (\r\n    <mesh visible position={[0, 0.87, 0]} rotation={[0, 0, 0]}>\r\n      <sphereGeometry attach=\"geometry\" args={[1, 16, 16]} />\r\n      <meshStandardMaterial\r\n        attach=\"material\"\r\n        color=\"black\"\r\n        transparent\r\n        opacity={1}\r\n        roughness={1}\r\n        metalness={0}\r\n      />\r\n    </mesh>\r\n  )\r\n}\r\n\r\n\r\nexport default function Ship({ children }) {\r\n\r\n  return (\r\n    <Suspense fallback={<Loading />}>\r\n      <ShipModel>\r\n        {children}\r\n      </ShipModel>\r\n    </Suspense>\r\n  )\r\n}","import * as THREE from 'three'\r\n\r\n/**\r\n * The size of each ground plane in meters, 1000 is fine\r\n */\r\nexport const PLANE_SIZE = 1000\r\n\r\n/**\r\n * How many ground planes must we traverse per level, default 6\r\n */\r\nexport const LEVEL_SIZE = 6\r\n\r\nexport const LEFT_BOUND = (-PLANE_SIZE / 2) * 0.6\r\nexport const RIGHT_BOUND = (PLANE_SIZE / 2) * 0.6\r\n\r\nexport const CUBE_SIZE = 20\r\n\r\nexport const CUBE_AMOUNT = 60\r\n\r\nexport const INITIAL_GAME_SPEED = 0.8\r\n\r\nexport const GAME_SPEED_MULTIPLIER = 0.2\r\n\r\nexport const WALL_RADIUS = 40\r\n\r\nexport const COLORS = [\r\n  {\r\n    name: 'pink',\r\n    hex: '#ff69b4',\r\n    three: new THREE.Color(0xff2190)\r\n  },\r\n  {\r\n    name: 'red',\r\n    hex: '#ff2919',\r\n    three: new THREE.Color(0xff2919) //  0xff3021 #ff1e0d\r\n  },\r\n  {\r\n    name: 'orange',\r\n    hex: '#bd4902',\r\n    three: new THREE.Color(0xbd4902) //0xcc4e00\r\n  },\r\n  {\r\n    name: 'green',\r\n    hex: '#26a300',\r\n    three: new THREE.Color(0x26a300) // 0x2ec200\r\n  },\r\n  {\r\n    name: 'blue',\r\n    hex: '#217aff',\r\n    three: new THREE.Color(0x2069d6)\r\n  },\r\n  {\r\n    name: 'purple',\r\n    hex: '#9370D8',\r\n    three: new THREE.Color(0x6942b8)\r\n  },\r\n  {\r\n    name: 'white',\r\n    hex: '#ffffff',\r\n    three: new THREE.Color(0x6b6b6b) // 0x828282\r\n  },\r\n  {\r\n    name: 'black',\r\n    hex: '#000000',\r\n    three: new THREE.Color(0xCCCCCC)\r\n  }\r\n]\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAIeElEQVR4nO3YwQ3CQAwAQQdRAIoE/dcHHzq4vJMSsjMdWPZj5W3NvgYASHlYNwD0CAAACBIAABD0vI78/rzcAQDczO/7Pw3kAwAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQNC2Zl8WDwAtPgAAECQAACBIAABAzcwcUmILIagULToAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAImElEQVR4nO3ZOxHCABBAwfCpaKhwgYPYQAACsYEDXECDgAwMJQQFebsObu6KN3Orx3n3GgCAlLV1A0CPAACAIAEAAEHb35Fvz407AICFOe6nr4FmAfBxuh7sHQAW4jLeZ4N4AQBAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAARt/418Ge9uAQAWbBYAx/1k3wCwcF4AABAkAAAgSAAAQM0wDG+Iiw9nih8WdgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAIe0lEQVR4nO3YsRHCQAwAQZmhB3JHFOH+ayAip4p3bJfA7XagkYIbbceaNQBAysO6AaBHAABAkAAAgKDnfeTPa3cHAPBn3r/vZSAfAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAgrZjzbJ4AGjxAQCAIAEAAEECAABqZuYEolQLdZ08W5wAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAIe0lEQVR4nO3YQRHCUAxAwZRBAg5qCBXVhyEc4OH33Erg7TrIJIc32eZYawCAlId1A0CPAACAIAEAAEHP+8ivz+4OAODP/N7fy0A+AAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABG1zrGXxANDiAwAAQQIAAIIEAADUzMwJEMkLySo4B1wAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAIl0lEQVR4nO3ZMQ3CABBA0ZaggJEdLxhhBiuEESNIacLOiAUIIxQF/e85uNwNP7nxcppeAwCQsrJuAOgRAAAQJAAAIGj9O/L1dnQHALAwh/35a6BZAHw8nnd7B4CF2G52s0G8AAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAIIEAAAECQAACBIAABAkAAAgSAAAQJAAAIAgAQAAQQIAAILW/0bebnZuAQAWbLycppcFA0CLFwAABAkAAAgSAABQMwzDG5D4EAqkVqISAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAIeUlEQVR4nO3YQRHCUAxAwZTBQtGIJLRUEoj4PbcSeLsOMsnhTbY1xxoAIOVh3QDQIwAAIEgAAEDQ8z7y/nq7AwD4M7/v5zKQDwAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEHbmmNZPAC0+AAAQJAAAIAgAQAANTNzAvUJDHH6EJ8/AAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/grid-rainbow.1dc05ea5.png\";","import { Color, RepeatWrapping } from 'three'\r\nimport React, { useRef, Suspense, useLayoutEffect } from 'react'\r\nimport { useFrame } from '@react-three/fiber'\r\nimport { useTexture } from '@react-three/drei'\r\nimport { useStore, mutation } from '../state/useStore'\r\n\r\nimport { PLANE_SIZE, GAME_SPEED_MULTIPLIER } from '../constants'\r\n\r\nimport gridRed from '../textures/grid-red.png'\r\nimport gridOrange from '../textures/grid-orange.png'\r\nimport gridGreen from '../textures/grid-green.png'\r\nimport gridBlue from '../textures/grid-blue.png'\r\nimport gridPurple from '../textures/grid-purple.png'\r\nimport gridPink from '../textures/grid-pink.png'\r\nimport gridRainbow from '../textures/grid-rainbow.png'\r\n\r\nconst TEXTURE_SIZE = PLANE_SIZE * 0.05 // 0.075\r\nconst MOVE_DISTANCE = PLANE_SIZE * 2\r\n\r\nconst color = new Color(0x000000)\r\n\r\nfunction Ground() {\r\n  const ground = useRef()\r\n  const groundTwo = useRef()\r\n\r\n  const plane = useRef()\r\n  const planeTwo = useRef()\r\n\r\n  const textures = useTexture([gridPink, gridRed, gridOrange, gridGreen, gridBlue, gridPurple, gridRainbow])\r\n\r\n  const ship = useStore(s => s.ship)\r\n  const incrementLevel = useStore(s => s.incrementLevel)\r\n\r\n  useLayoutEffect(() => {\r\n    textures.forEach(texture => {\r\n      texture.wrapS = texture.wrapT = RepeatWrapping\r\n      texture.repeat.set(TEXTURE_SIZE, TEXTURE_SIZE)\r\n      texture.anisotropy = 16\r\n    })\r\n  }, [textures])\r\n\r\n  const moveCounter = useRef(1)\r\n  const lastMove = useRef(0)\r\n\r\n  useFrame((state, delta) => {\r\n\r\n    if (ship.current) {\r\n      // Alternates moving the two ground planes when we've just passed over onto a new plane, with logic to make sure it only happens once per pass\r\n      // Checks if weve moved 10 meters into the new plane (-10) (so the old plane is no longer visible)\r\n      if (Math.round(ship.current.position.z) + PLANE_SIZE * moveCounter.current + 10 < -10) {\r\n\r\n        // Ensures we only move the plane once per pass\r\n        if (moveCounter.current === 1 || Math.abs(ship.current.position.z) - Math.abs(lastMove.current) <= 10) {\r\n\r\n          // change the level every 4 moves or 4000 meters\r\n          if (moveCounter.current % 6 === 0) {\r\n            incrementLevel()\r\n            mutation.colorLevel++\r\n            mutation.desiredSpeed += GAME_SPEED_MULTIPLIER\r\n\r\n            if (mutation.colorLevel >= textures.length) {\r\n              mutation.colorLevel = 0\r\n            }\r\n          }\r\n\r\n          if (moveCounter.current % 2 === 0) {\r\n            groundTwo.current.position.z -= MOVE_DISTANCE\r\n            lastMove.current = groundTwo.current.position.z\r\n            planeTwo.current.material.map = textures[mutation.colorLevel]\r\n          } else {\r\n            ground.current.position.z -= MOVE_DISTANCE\r\n            lastMove.current = ground.current.position.z\r\n            plane.current.material.map = textures[mutation.colorLevel]\r\n          }\r\n        }\r\n\r\n        moveCounter.current++\r\n      }\r\n    }\r\n\r\n\r\n    // handles changing ground color between levels (really interpolating the emissiveness and changing the emissive map around)\r\n    if (mutation.colorLevel > 0) {\r\n      if (plane.current.material.map.uuid !== planeTwo.current.material.map.uuid) {\r\n        if (plane.current.material.emissiveIntensity < 1) {\r\n          if (plane.current.material.emissiveIntensity + delta * mutation.gameSpeed > 1) {\r\n            plane.current.material.emissiveIntensity = 1\r\n          } else {\r\n            plane.current.material.emissiveIntensity += delta * mutation.gameSpeed\r\n          }\r\n        } else {\r\n          plane.current.material.map = textures[mutation.colorLevel]\r\n          if (mutation.colorLevel === textures.length - 1) {\r\n            plane.current.material.emissiveMap = textures[0]\r\n          } else {\r\n            plane.current.material.emissiveMap = textures[mutation.colorLevel + 1]\r\n          }\r\n          plane.current.material.emissiveIntensity = 0\r\n        }\r\n      }\r\n    }\r\n  })\r\n\r\n\r\n  return (\r\n    <>\r\n      <group ref={ground} position={[0, 0, -(PLANE_SIZE / 2)]}>\r\n        <mesh\r\n          ref={plane}\r\n          receiveShadow\r\n          visible\r\n          rotation={[-Math.PI / 2, 0, 0]}\r\n        >\r\n          <planeBufferGeometry attach=\"geometry\" args={[PLANE_SIZE, PLANE_SIZE, 1, 1]} />\r\n          <meshStandardMaterial\r\n            receiveShadow\r\n            color={color.set(0xFFFFFF)}\r\n            emissiveMap={textures[1]}\r\n            emissive={color.set(0xFFFFFF)}\r\n            emissiveIntensity={0}\r\n            attach=\"material\"\r\n            map={textures[0]}\r\n            roughness={1}\r\n            metalness={0}\r\n          />\r\n        </mesh>\r\n      </group>\r\n      <group ref={groundTwo} position={[0, 0, -PLANE_SIZE - (PLANE_SIZE / 2)]}>\r\n        <mesh\r\n          ref={planeTwo}\r\n          receiveShadow\r\n          visible\r\n          rotation={[-Math.PI / 2, 0, 0]}\r\n        >\r\n          <planeBufferGeometry attach=\"geometry\" args={[PLANE_SIZE, PLANE_SIZE, 1, 1]} />\r\n          <meshStandardMaterial\r\n            receiveShadow\r\n            emissiveMap={textures[1]}\r\n            attach=\"material\"\r\n            map={textures[0]}\r\n            roughness={1}\r\n            metalness={0}\r\n          />\r\n        </mesh>\r\n      </group>\r\n    </>\r\n  )\r\n}\r\n\r\nfunction LoadingGround() {\r\n  return (\r\n    <mesh\r\n      receiveShadow\r\n      visible\r\n      position={[0, 0, 0]}\r\n      rotation={[-Math.PI / 2, 0, 0]}\r\n    >\r\n      <planeBufferGeometry attach=\"geometry\" args={[5000, 5000, 1, 1]} />\r\n      <meshStandardMaterial\r\n        receiveShadow\r\n        attach=\"material\"\r\n        color={`black`}\r\n        roughness={1}\r\n        metalness={0}\r\n      />\r\n    </mesh>\r\n  )\r\n}\r\n\r\nexport default function CompleteGround() {\r\n\r\n  return (\r\n    <Suspense fallback={<LoadingGround />}>\r\n      <Ground />\r\n    </Suspense>\r\n  )\r\n}","export default __webpack_public_path__ + \"static/media/galaxy.ef4e164b.jpg\";","import { Suspense, useRef, useMemo, useLayoutEffect } from 'react'\r\nimport { useThree, useFrame } from '@react-three/fiber'\r\nimport { useTexture, Stars } from '@react-three/drei'\r\nimport { Color, BackSide, MirroredRepeatWrapping } from 'three'\r\n\r\nimport galaxyTexture from '../textures/galaxy.jpg'\r\n\r\nimport { mutation, useStore } from '../state/useStore'\r\n\r\nimport { COLORS } from '../constants'\r\n\r\nfunction Sun() {\r\n  const { clock } = useThree()\r\n\r\n  const sun = useStore((s) => s.sun)\r\n  const ship = useStore((s) => s.ship)\r\n\r\n  const sunColor = useMemo(() => new Color(1, 0.694, 0.168), [])\r\n\r\n  useFrame((state, delta) => {\r\n    if (ship.current) {\r\n      sun.current.position.z = ship.current.position.z - 2000\r\n      sun.current.position.x = ship.current.position.x\r\n    }\r\n\r\n    const scaleFactor = mutation.currentMusicLevel\r\n\r\n    sun.current.scale.x += Math.sin(clock.getElapsedTime() * 3) / 3000\r\n    sun.current.scale.y += Math.sin(clock.getElapsedTime() * 3) / 3000\r\n\r\n    if (scaleFactor >= 0.8 && sun.current.scale.x < 1.05) {\r\n      sun.current.scale.x += scaleFactor * delta * 2\r\n      sun.current.scale.y += scaleFactor * delta * 2\r\n    } else if (sun.current.scale.x > 1) {\r\n      sun.current.scale.x -= scaleFactor * delta * 0.5\r\n      sun.current.scale.y -= scaleFactor * delta * 0.5\r\n    }\r\n  })\r\n\r\n  return (\r\n    <mesh ref={sun} position={[0, 0, -2000]}>\r\n      <sphereGeometry attach=\"geometry\" args={[300, 30, 30]} />\r\n      <meshStandardMaterial fog={false} emissive={sunColor} emissiveIntensity={1} attach=\"material\" color={COLORS[1].three} />\r\n    </mesh>\r\n  )\r\n}\r\n\r\nfunction Sky() {\r\n  const texture = useTexture(galaxyTexture)\r\n  const sky = useRef()\r\n  const stars = useRef()\r\n\r\n  const ship = useStore((s) => s.ship)\r\n\r\n  useLayoutEffect(() => {\r\n    texture.wrapS = texture.wrapT = MirroredRepeatWrapping\r\n    texture.repeat.set(1.8, 1.8)\r\n    texture.anisotropy = 16\r\n  }, [texture])\r\n\r\n\r\n  useFrame((state, delta) => {\r\n    sky.current.rotation.z += delta * 0.02 * mutation.gameSpeed\r\n    stars.current.rotation.z += delta * 0.02 * mutation.gameSpeed\r\n    sky.current.emissive = mutation.globalColor\r\n\r\n    if (ship.current) {\r\n      sky.current.position.x = ship.current.position.x\r\n      stars.current.position.x = ship.current.position.x\r\n      sky.current.position.z = ship.current.position.z\r\n      stars.current.position.z = ship.current.position.z\r\n    }\r\n  })\r\n\r\n\r\n  return (\r\n    <>\r\n      <Stars ref={stars} radius={800} depth={100} count={10000} factor={40} saturation={1} fade />\r\n      <mesh ref={sky} position={[0, 10, -50]} rotation={[0, 0, Math.PI]}>\r\n        <hemisphereLight intensity={0.7} />\r\n        <sphereGeometry attach=\"geometry\" args={[2000, 10, 10]} />\r\n        <meshPhongMaterial emissive={COLORS[0].three} emissiveIntensity={0.1} fog={false} side={BackSide} attach=\"material\" map={texture} />\r\n      </mesh>\r\n    </>\r\n  )\r\n}\r\n\r\nfunction Fog() {\r\n  const fog = useRef()\r\n\r\n  useFrame((state, delta) => {\r\n    fog.current.near = 100\r\n    fog.current.far = 800\r\n    fog.current.color = mutation.globalColor\r\n  })\r\n\r\n  return (\r\n    <fog ref={fog} attach=\"fog\" args={['#bf6c00', 600, 800]} />\r\n  )\r\n}\r\n\r\n\r\nexport default function Skybox() {\r\n\r\n  return (\r\n    <Suspense fallback={null}>\r\n      <Sun />\r\n      <Sky />\r\n      <Fog />\r\n    </Suspense>\r\n  )\r\n}","const randomInRange = (from, to) => Math.floor(Math.random() * (to - from + 1)) - to\r\n\r\nexport default randomInRange","export default function distance2D(p1x, p1y, p2x, p2y) {\r\n  const a = p2x - p1x;\r\n  const b = p2y - p1y;\r\n\r\n  return Math.sqrt(a * a + b * b);\r\n}","import { Object3D } from 'three'\r\nimport { useRef, useMemo } from 'react'\r\nimport { useFrame } from '@react-three/fiber'\r\n\r\nimport { CUBE_AMOUNT, CUBE_SIZE, PLANE_SIZE, COLORS, WALL_RADIUS, LEVEL_SIZE, LEFT_BOUND, RIGHT_BOUND } from '../constants'\r\nimport { useStore, mutation } from '../state/useStore'\r\n\r\nimport randomInRange from '../util/randomInRange'\r\nimport distance2D from '../util/distance2D'\r\n\r\nconst negativeBound = LEFT_BOUND + WALL_RADIUS / 2\r\nconst positiveBound = RIGHT_BOUND - WALL_RADIUS / 2\r\n\r\nexport default function InstancedCubes() {\r\n  const mesh = useRef()\r\n  const material = useRef()\r\n\r\n  const ship = useStore(s => s.ship)\r\n  const level = useStore(s => s.level)\r\n\r\n  const dummy = useMemo(() => new Object3D(), [])\r\n  const cubes = useMemo(() => {\r\n    // Setup initial cube positions\r\n    const temp = []\r\n    for (let i = 0; i < CUBE_AMOUNT; i++) {\r\n      const x = randomInRange(negativeBound, positiveBound)\r\n      const y = 10\r\n      const z = -900 + randomInRange(-400, 400)\r\n\r\n      temp.push({ x, y, z })\r\n    }\r\n    return temp\r\n  }, [])\r\n\r\n  const diamondStart = useMemo(() => -(level * PLANE_SIZE * LEVEL_SIZE) - PLANE_SIZE * (LEVEL_SIZE - 2.6), [level])\r\n  const diamondEnd = useMemo(() => -(level * PLANE_SIZE * LEVEL_SIZE) - PLANE_SIZE * (LEVEL_SIZE), [level])\r\n\r\n  useFrame((state, delta) => {\r\n    let isOutsideDiamond = false\r\n    if (ship.current) {\r\n      if (ship.current.position.z > diamondStart || ship.current.position.z < diamondEnd) {\r\n        isOutsideDiamond = true\r\n      }\r\n    }\r\n\r\n    cubes.forEach((cube, i) => {\r\n      if (ship.current) {\r\n        if (cube.z - ship.current.position.z > -15) { // No need to run the rather expensive distance function if the ship is too far away\r\n          if (cube.x - ship.current.position.x > -15 || cube.x - ship.current.position.x < 15) {\r\n            const distanceToShip = distance2D(ship.current.position.x, ship.current.position.z, cube.x, cube.z)\r\n\r\n            if (distanceToShip < 12) {\r\n              mutation.gameSpeed = 0\r\n              mutation.gameOver = true\r\n            }\r\n          }\r\n        }\r\n\r\n        if (cube.z - ship.current.position.z > 15) {\r\n          if (isOutsideDiamond) {\r\n            cube.z = ship.current.position.z - PLANE_SIZE + randomInRange(-200, 0)\r\n            cube.y = -CUBE_SIZE\r\n            cube.x = randomInRange(negativeBound, positiveBound)\r\n          } else {\r\n            cube.z = ship.current.position.z - (PLANE_SIZE * 3.1) + randomInRange(-200, 0)\r\n            cube.y = -CUBE_SIZE\r\n            cube.x = randomInRange(negativeBound, positiveBound)\r\n          }\r\n        }\r\n\r\n        if (cube.y < CUBE_SIZE / 2) {\r\n          if (cube.y + delta * 100 > CUBE_SIZE / 2) {\r\n            cube.y = CUBE_SIZE / 2\r\n          } else {\r\n            cube.y += delta * 100\r\n          }\r\n        }\r\n      }\r\n\r\n      material.current.color = mutation.globalColor\r\n\r\n      dummy.position.set(\r\n        cube.x,\r\n        cube.y,\r\n        cube.z\r\n      )\r\n\r\n      // apply changes to dummy and to the instanced matrix\r\n      dummy.updateMatrix()\r\n      mesh.current.setMatrixAt(i, dummy.matrix)\r\n    })\r\n\r\n    // Tells THREE to draw the updated matrix, I guess?\r\n    mesh.current.instanceMatrix.needsUpdate = true\r\n  })\r\n\r\n  return (\r\n    <instancedMesh ref={mesh} args={[null, null, CUBE_AMOUNT]}>\r\n      <boxBufferGeometry args={[CUBE_SIZE, CUBE_SIZE, CUBE_SIZE]} />\r\n      <meshBasicMaterial ref={material} color={COLORS[0].three} />\r\n    </instancedMesh>\r\n  )\r\n}","import { Cone } from '@react-three/drei'\r\nimport { useFrame } from '@react-three/fiber'\r\nimport { useRef } from 'react'\r\n\r\nimport { useStore, mutation } from '../state/useStore'\r\nimport { PLANE_SIZE, WALL_RADIUS, COLORS, LEFT_BOUND, RIGHT_BOUND } from '../constants'\r\n\r\nexport default function Walls() {\r\n  const ship = useStore((s) => s.ship)\r\n\r\n  const rightWall = useRef()\r\n  const leftWall = useRef()\r\n\r\n  useFrame((state, delta) => {\r\n    if (ship.current) {\r\n      rightWall.current.position.z = ship.current.position.z\r\n      leftWall.current.position.z = ship.current.position.z\r\n\r\n      if (ship.current.position.x <= LEFT_BOUND + (WALL_RADIUS / 2) || ship.current.position.x >= RIGHT_BOUND - (WALL_RADIUS / 2)) {\r\n        mutation.gameSpeed = 0\r\n        mutation.gameOver = true\r\n      }\r\n    }\r\n\r\n    leftWall.current.material.color = mutation.globalColor\r\n    rightWall.current.material.color = mutation.globalColor\r\n  })\r\n\r\n  return (\r\n    <>\r\n      <Cone args={[WALL_RADIUS, PLANE_SIZE * 2, 8]} position={[LEFT_BOUND, 0, -5]} rotation={[Math.PI / 2, 0, Math.PI]} ref={leftWall}>\r\n        <meshBasicMaterial attach=\"material\" color={COLORS[0].three} />\r\n      </Cone>\r\n      <Cone args={[WALL_RADIUS, PLANE_SIZE * 2, 8]} position={[RIGHT_BOUND, 0, -5]} rotation={[Math.PI / 2, 0, Math.PI]} ref={rightWall}>\r\n        <meshBasicMaterial attach=\"material\" color={COLORS[0].three} />\r\n      </Cone>\r\n    </>\r\n  )\r\n}","import { PLANE_SIZE, CUBE_SIZE, WALL_RADIUS, LEFT_BOUND } from '../constants/index'\r\n\r\nconst segments = (PLANE_SIZE - WALL_RADIUS / 2) / CUBE_SIZE\r\nconst negativeBound = -(PLANE_SIZE / 2) + WALL_RADIUS / 2\r\n\r\nexport function makeWall(hasGap = true, gapSize = 3) {\r\n  const wallCoordinates = [...Array(segments)].map((cube, index) => {\r\n    return {\r\n      x: negativeBound + index * CUBE_SIZE, // -500, -480, -460, etc\r\n      y: CUBE_SIZE / 2,\r\n      z: index <= segments / 2 ? -(index * CUBE_SIZE) : -(segments * CUBE_SIZE) + index * CUBE_SIZE, // pyramid formation\r\n    }\r\n  })\r\n\r\n  if (hasGap) {\r\n    wallCoordinates.splice(segments / 2 - Math.floor(gapSize / 2), gapSize) // TODO: rethink this math when not tired\r\n  }\r\n\r\n  if (LEFT_BOUND < PLANE_SIZE / 2) {\r\n    const spliceFactor = (PLANE_SIZE / 2 + LEFT_BOUND) / CUBE_SIZE - 1\r\n    wallCoordinates.splice(0, spliceFactor)\r\n    wallCoordinates.splice(-spliceFactor, spliceFactor)\r\n  }\r\n\r\n  return wallCoordinates\r\n}\r\n\r\nfunction makeTunnel(tunnelLength = 10, gapSize = 3) {\r\n\r\n  // const tunnelCoordinates = [...Array(tunnelLength * 2)].map((cube, index) => {\r\n  //   return {\r\n  //     x: index % 2 === 0 ? CUBE_SIZE * 2 : -CUBE_SIZE * 2,\r\n  //     y: CUBE_SIZE / 2,\r\n  //     z: -(((segments / 2 - 2) * CUBE_SIZE) + (index * CUBE_SIZE * 0.7))\r\n  //   }\r\n  // })\r\n\r\n  const coords = [\r\n    { x: 40, y: 10, z: -450 },\r\n    { x: -40, y: 10, z: -450 },\r\n    { x: 40, y: 10, z: -478 },\r\n    { x: -40, y: 10, z: -478 },\r\n    { x: 40, y: 10, z: -506 },\r\n    { x: -40, y: 10, z: -506 },\r\n    { x: 40, y: 10, z: -534 },\r\n    { x: -40, y: 10, z: -534 },\r\n    { x: 40, y: 10, z: -562 },\r\n    { x: -40, y: 10, z: -562 },\r\n    { x: 40, y: 10, z: -590 },\r\n    { x: -40, y: 10, z: -590 },\r\n    { x: 40, y: 10, z: -618 },\r\n    { x: -40, y: 10, z: -618 },\r\n    { x: 40, y: 10, z: -646 },\r\n    { x: -40, y: 10, z: -646 },\r\n    { x: 40, y: 10, z: -674 },\r\n    { x: -40, y: 10, z: -674 },\r\n    { x: 40, y: 10, z: -702 },\r\n    { x: -40, y: 10, z: -702 }]\r\n\r\n  return coords\r\n}\r\n\r\nfunction makeDiamond(size = 21, tunnelLength = 10) {\r\n  const wallEndOffset = -((segments / 2 - 2) * CUBE_SIZE)\r\n  const tunnelEndOffset = tunnelLength * CUBE_SIZE * 0.7\r\n\r\n  const outerLeftWall = [...Array(size)].map((cube, index) => {\r\n    return {\r\n      x: index === 0 ? -70 : index <= size / 2 ? -CUBE_SIZE * 3 - index * CUBE_SIZE : (-CUBE_SIZE * 3 - size * CUBE_SIZE) + index * CUBE_SIZE,\r\n      y: CUBE_SIZE / 2,\r\n      z: wallEndOffset - tunnelEndOffset - index * CUBE_SIZE * 1.75\r\n    }\r\n  })\r\n\r\n  const outerRightWall = [...Array(size)].map((cube, index) => {\r\n    return {\r\n      x: index === 0 ? 70 : index <= size / 2 ? CUBE_SIZE * 3 + index * CUBE_SIZE : (CUBE_SIZE * 3 + size * CUBE_SIZE) - index * CUBE_SIZE,\r\n      y: CUBE_SIZE / 2,\r\n      z: wallEndOffset - tunnelEndOffset - index * CUBE_SIZE * 1.75\r\n    }\r\n  })\r\n\r\n  const innerSize = Math.floor(size / 2) - 2 // TODO: maybe remove -2\r\n\r\n  const innerLeftWall = [...Array(innerSize)].map((cube, index) => {\r\n    return {\r\n      x: index === 1 ? (-CUBE_SIZE / 2) - index * CUBE_SIZE * 1.1 : index < innerSize / 2 ? (-CUBE_SIZE / 2) - index * CUBE_SIZE : (-CUBE_SIZE / 2) - (innerSize * CUBE_SIZE) + index * CUBE_SIZE,\r\n      y: CUBE_SIZE / 2,\r\n      z: wallEndOffset - tunnelEndOffset - (Math.floor(size / 1.5) * CUBE_SIZE) - index * CUBE_SIZE * 1.75\r\n    }\r\n  })\r\n\r\n  const innerRightWall = [...Array(innerSize)].map((cube, index) => {\r\n    return {\r\n      x: index === 1 ? (CUBE_SIZE / 2) + index * CUBE_SIZE * 1.1 : index < innerSize / 2 ? (CUBE_SIZE / 2) + index * CUBE_SIZE : (CUBE_SIZE / 2) + (innerSize * CUBE_SIZE) - index * CUBE_SIZE,\r\n      y: CUBE_SIZE / 2,\r\n      z: wallEndOffset - tunnelEndOffset - (Math.floor(size / 1.5) * CUBE_SIZE) - index * CUBE_SIZE * 1.75\r\n    }\r\n  })\r\n\r\n  const middlePiece = { x: 0, y: CUBE_SIZE / 2, z: wallEndOffset - tunnelEndOffset - (Math.floor(size / 1.5) * CUBE_SIZE) + CUBE_SIZE }\r\n\r\n  const firstDiamond = [...outerLeftWall, ...outerRightWall, middlePiece, ...innerLeftWall, ...innerRightWall]\r\n  const secondDiamond = firstDiamond.map((coordinates, index) => ({ ...coordinates, z: index >= 42 ? coordinates.z - 700 /* 735 */ : coordinates.z - (size * CUBE_SIZE * 1.75) }))\r\n\r\n  const finalTunnel = [\r\n    { x: 60, y: 10, z: -2045 },\r\n    { x: -60, y: 10, z: -2045 },\r\n    { x: 40, y: 10, z: -2065 },\r\n    { x: -40, y: 10, z: -2065 },\r\n    { x: 40, y: 10, z: -2085 },\r\n    { x: -40, y: 10, z: -2085 },\r\n    { x: 40, y: 10, z: -2105 },\r\n    { x: -40, y: 10, z: -2105 },\r\n    { x: 40, y: 10, z: -2125 },\r\n    { x: -40, y: 10, z: -2125 },\r\n    { x: 40, y: 10, z: -2145 },\r\n    { x: -40, y: 10, z: -2145 },\r\n    { x: 40, y: 10, z: -2165 },\r\n    { x: -40, y: 10, z: -2165 },\r\n    { x: 40, y: 10, z: -2185 },\r\n    { x: -40, y: 10, z: -2185 },\r\n    { x: 40, y: 10, z: -2205 },\r\n    { x: -40, y: 10, z: -2205 },\r\n    { x: 40, y: 10, z: -2225 },\r\n    { x: -40, y: 10, z: -2225 },\r\n    { x: 40, y: 10, z: -2245 },\r\n    { x: -40, y: 10, z: -2245 },\r\n    { x: 40, y: 10, z: -2265 },\r\n    { x: -40, y: 10, z: -2265 },\r\n  ]\r\n\r\n  return [...firstDiamond, ...secondDiamond, ...finalTunnel]\r\n}\r\n\r\nexport function generateDiamond() {\r\n  const initialWall = makeWall()\r\n  const tunnel = makeTunnel()\r\n  const diamond = makeDiamond()\r\n\r\n  return [...initialWall, ...tunnel, ...diamond]\r\n}\r\n\r\nexport function generateCubeTunnel() {\r\n  const initialWall = makeWall()\r\n  const tunnel = makeTunnel()\r\n\r\n  return [...initialWall, ...tunnel]\r\n}","import { Object3D } from 'three'\r\nimport { useRef, useMemo } from 'react'\r\nimport { useFrame } from '@react-three/fiber'\r\n\r\nimport { PLANE_SIZE, COLORS, LEVEL_SIZE } from '../constants'\r\nimport { useStore, mutation } from '../state/useStore'\r\n\r\nimport distance2D from '../util/distance2D'\r\nimport { generateCubeTunnel, generateDiamond } from '../util/generateFixedCubes'\r\n\r\n\r\nexport default function InstancedCubes() {\r\n  const mesh = useRef()\r\n  const material = useRef()\r\n\r\n  const ship = useStore(s => s.ship)\r\n  const level = useStore(s => s.level)\r\n\r\n  const tunnelCoords = useMemo(() => generateCubeTunnel(), [])\r\n  const diamondCoords = useMemo(() => generateDiamond(), [])\r\n\r\n  const dummy = useMemo(() => new Object3D(), [])\r\n  const cubes = useMemo(() => {\r\n    // Setup initial cube positions\r\n    const temp = []\r\n    for (let i = 0; i < diamondCoords.length; i++) {\r\n      const x = tunnelCoords[i]?.x || 0\r\n      const y = 0\r\n      const z = 300 + tunnelCoords[i]?.z || 10\r\n\r\n      temp.push({ x, y, z })\r\n    }\r\n    return temp\r\n  }, [diamondCoords, tunnelCoords])\r\n\r\n  const currentLevelMinusDiamondStart = useMemo(() => -(level * PLANE_SIZE * LEVEL_SIZE) - PLANE_SIZE * (LEVEL_SIZE - 2), [level])\r\n\r\n  useFrame((state, delta) => {\r\n    cubes.forEach((cube, i) => {\r\n      if (ship.current) {\r\n        if (cube.z - ship.current.position.z > -15) {\r\n          if (cube.x - ship.current.position.x > -15 || cube.x - ship.current.position.x < 15) {\r\n            const distanceToShip = distance2D(ship.current.position.x, ship.current.position.z, cube.x, cube.z)\r\n\r\n            if (distanceToShip < 12) {\r\n              mutation.gameSpeed = 0\r\n              mutation.gameOver = true\r\n            }\r\n          }\r\n        }\r\n\r\n        if (mutation.shouldShiftItems) { // 4\r\n          cube.x = diamondCoords[i].x\r\n          cube.y = 0\r\n          cube.z = currentLevelMinusDiamondStart + diamondCoords[i].z\r\n        }\r\n\r\n      }\r\n\r\n      material.current.color = mutation.globalColor\r\n\r\n      dummy.position.set(\r\n        cube.x,\r\n        cube.y,\r\n        cube.z\r\n      )\r\n\r\n      // apply changes to dummy and to the instanced matrix\r\n      dummy.updateMatrix()\r\n      mesh.current.setMatrixAt(i, dummy.matrix)\r\n    })\r\n\r\n    // Tells THREE to draw the updated matrix, I guess?\r\n    mesh.current.instanceMatrix.needsUpdate = true\r\n  })\r\n\r\n  return (\r\n    <instancedMesh ref={mesh} args={[null, null, diamondCoords.length]}>\r\n      <boxBufferGeometry args={[20, 40, 20]} />\r\n      <meshBasicMaterial ref={material} color={COLORS[0].three} />\r\n    </instancedMesh>\r\n  )\r\n}","import { useFrame } from '@react-three/fiber'\r\nimport { useRef } from 'react'\r\n\r\nimport { useStore, mutation } from '../state/useStore'\r\nimport { PLANE_SIZE, COLORS, LEVEL_SIZE } from '../constants'\r\n\r\nexport default function Arch() {\r\n  const ship = useStore((s) => s.ship)\r\n  const level = useStore(s => s.level)\r\n\r\n  const arches = useRef()\r\n\r\n  const arch1 = useRef()\r\n  const arch2 = useRef()\r\n  const arch3 = useRef()\r\n  const arch4 = useRef()\r\n  const arch5 = useRef()\r\n  const arch6 = useRef()\r\n\r\n  // latter arches\r\n  const arch7 = useRef()\r\n  const arch8 = useRef()\r\n  const arch9 = useRef()\r\n  const arch10 = useRef()\r\n\r\n  const levelColor = (base) => {\r\n    return (base + level) % LEVEL_SIZE\r\n  }\r\n\r\n  useFrame((state, delta) => {\r\n    if (ship.current) {\r\n      if (mutation.shouldShiftItems) {\r\n        arches.current.position.z = mutation.currentLevelLength - PLANE_SIZE * (LEVEL_SIZE - 2) - 300\r\n        arch7.current.visible = true\r\n        arch8.current.visible = true\r\n        arch9.current.visible = true\r\n        arch10.current.visible = true\r\n      }\r\n    }\r\n\r\n\r\n    // TODO: maybe set arches to globalcolor always\r\n    if (mutation.colorLevel === 6) {\r\n      arch1.current.material.color = mutation.globalColor\r\n      arch2.current.material.color = mutation.globalColor\r\n      arch3.current.material.color = mutation.globalColor\r\n      arch4.current.material.color = mutation.globalColor\r\n      arch5.current.material.color = mutation.globalColor\r\n      arch6.current.material.color = mutation.globalColor\r\n      arch7.current.material.color = mutation.globalColor\r\n      arch8.current.material.color = mutation.globalColor\r\n      arch9.current.material.color = mutation.globalColor\r\n      arch10.current.material.color = mutation.globalColor\r\n    } else {\r\n      arch1.current.material.color = COLORS[levelColor(0)].three\r\n      arch2.current.material.color = COLORS[levelColor(1)].three\r\n      arch3.current.material.color = COLORS[levelColor(2)].three\r\n      arch4.current.material.color = COLORS[levelColor(3)].three\r\n      arch5.current.material.color = COLORS[levelColor(4)].three\r\n      arch6.current.material.color = COLORS[levelColor(5)].three\r\n\r\n      arch7.current.material.color = COLORS[levelColor(0)].three\r\n      arch8.current.material.color = COLORS[levelColor(0)].three\r\n      arch9.current.material.color = COLORS[levelColor(0)].three\r\n      arch10.current.material.color = COLORS[levelColor(0)].three\r\n    }\r\n\r\n\r\n    const scaleFactor = mutation.currentMusicLevel\r\n\r\n    if (scaleFactor > 0.8 && arches.current.scale.x > 0.95) {\r\n      arches.current.scale.x -= scaleFactor * delta * 1\r\n      arches.current.scale.y -= scaleFactor * delta * 1\r\n    } else if (arches.current.scale.x < 1) {\r\n      arches.current.scale.x += scaleFactor * delta * 0.5\r\n      arches.current.scale.y += scaleFactor * delta * 0.5\r\n    }\r\n  })\r\n\r\n  return (\r\n    <group ref={arches}>\r\n      <mesh ref={arch1} position={[0, 0, -150]} rotation={[0, 0, Math.PI]}>\r\n        <torusBufferGeometry args={[100, 20, 3, 30]} />\r\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[0].three} />\r\n      </mesh>\r\n      <mesh ref={arch2} position={[0, 0, -200]} rotation={[0, 0, Math.PI]}>\r\n        <torusBufferGeometry args={[90, 16, 3, 30]} />\r\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[1].three} />\r\n      </mesh>\r\n      <mesh ref={arch3} position={[0, 0, -250]} rotation={[0, 0, Math.PI]}>\r\n        <torusBufferGeometry args={[80, 12, 3, 30]} />\r\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[2].three} />\r\n      </mesh>\r\n      <mesh ref={arch4} position={[0, 0, -300]} rotation={[0, 0, Math.PI]}>\r\n        <torusBufferGeometry args={[70, 10, 3, 30]} />\r\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[3].three} />\r\n      </mesh>\r\n      <mesh ref={arch5} position={[0, 0, -350]} rotation={[0, 0, Math.PI]}>\r\n        <torusBufferGeometry args={[60, 8, 3, 30]} />\r\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[4].three} />\r\n      </mesh>\r\n      <mesh ref={arch6} position={[0, 0, -400]} rotation={[0, 0, Math.PI]}>\r\n        <torusBufferGeometry args={[50, 6, 3, 30]} />\r\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[5].three} />\r\n      </mesh>\r\n      <mesh visible={false} ref={arch7} position={[0, 0, -1980]} rotation={[0, 0, Math.PI]}>\r\n        <torusBufferGeometry args={[50, 10, 3, 30]} />\r\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[0].three} />\r\n      </mesh>\r\n      <mesh visible={false} ref={arch8} position={[0, 0, -1920]} rotation={[0, 0, Math.PI]}>\r\n        <torusBufferGeometry args={[50, 10, 3, 30]} />\r\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[0].three} />\r\n      </mesh>\r\n      <mesh visible={false} ref={arch9} position={[0, 0, -1880]} rotation={[0, 0, Math.PI]}>\r\n        <torusBufferGeometry args={[50, 10, 3, 30]} />\r\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[0].three} />\r\n      </mesh>\r\n      <mesh visible={false} ref={arch10} position={[0, 0, -1820]} rotation={[0, 0, Math.PI]}>\r\n        <torusBufferGeometry args={[50, 10, 3, 30]} />\r\n        <meshBasicMaterial fog={false} attach=\"material\" color={COLORS[0].three} />\r\n      </mesh>\r\n    </group>\r\n  )\r\n}","export default __webpack_public_path__ + \"static/media/galaxyTextureBW.3bf07a9f.png\";","import { useFrame, useThree } from '@react-three/fiber'\r\nimport { useTexture } from '@react-three/drei'\r\nimport { useRef, useLayoutEffect, useState, Suspense, useMemo } from 'react'\r\nimport { MirroredRepeatWrapping, Vector2, BackSide } from 'three'\r\n\r\nimport { useStore, mutation } from '../state/useStore'\r\nimport { PLANE_SIZE, COLORS, LEVEL_SIZE } from '../constants'\r\n\r\nimport galaxyTexture from '../textures/galaxyTextureBW.png'\r\n\r\nfunction HyperspaceTunnel() {\r\n  const texture = useTexture(galaxyTexture)\r\n\r\n  const ship = useStore((s) => s.ship)\r\n  const level = useStore(s => s.level)\r\n\r\n  const { clock } = useThree()\r\n\r\n  const tunnel = useRef()\r\n\r\n  const tunnel2 = useRef()\r\n\r\n  const tunnels = useRef()\r\n\r\n  const repeatX = useRef(10)\r\n  const repeatY = useRef(4)\r\n\r\n\r\n  const [lathe] = useState(() => {\r\n    const points = [\r\n      new Vector2(100, 150),\r\n      new Vector2(90, 200),\r\n      new Vector2(80, 250),\r\n      new Vector2(70, 300),\r\n      new Vector2(60, 350),\r\n      new Vector2(50, 400),\r\n\r\n    ]\r\n\r\n    return points\r\n  })\r\n\r\n  const [lathe2] = useState(() => {\r\n    const points = [\r\n      new Vector2(50, 400),\r\n      new Vector2(300, 600), // 6\r\n      new Vector2(300, 1000), // 7\r\n      new Vector2(300, 1600), // 8\r\n      new Vector2(100, 1720), // 9\r\n      new Vector2(50, 1790),\r\n      new Vector2(50, 1980)]\r\n\r\n    return points\r\n  })\r\n\r\n  useLayoutEffect(() => {\r\n    texture.wrapS = texture.wrapT = MirroredRepeatWrapping\r\n    texture.repeat.set(10, 4)\r\n    texture.anisotropy = 16\r\n  }, [texture])\r\n\r\n  const lowerBound = useMemo(() => -4250 - PLANE_SIZE * (level * LEVEL_SIZE), [level])\r\n  const upperBound = useMemo(() => -6500 - PLANE_SIZE * (level * LEVEL_SIZE), [level])\r\n  const prevLowerBound = useMemo(() => -4250 - PLANE_SIZE * ((level - 1) * LEVEL_SIZE), [level])\r\n  const prevUpperBound = useMemo(() => -6500 - PLANE_SIZE * ((level - 1) * LEVEL_SIZE), [level])\r\n\r\n  useFrame((state, delta) => {\r\n    if (ship.current) {\r\n      if (mutation.shouldShiftItems) {\r\n        tunnel.current.position.z = lowerBound - 50\r\n        tunnel2.current.position.z = lowerBound - 50\r\n      }\r\n    }\r\n\r\n    if (ship.current) {\r\n      if ((ship.current.position.z < lowerBound && ship.current.position.z > upperBound) ||\r\n        (ship.current.position.z < prevLowerBound && ship.current.position.z > prevUpperBound)) {\r\n        tunnel2.current.visible = true\r\n      } else {\r\n        tunnel2.current.visible = false\r\n      }\r\n    }\r\n\r\n\r\n    repeatY.current = 0.3 + (Math.sin(clock.getElapsedTime() / 3)) * 1.5\r\n    repeatX.current = 6 + (Math.sin(clock.getElapsedTime() / 2)) * 4\r\n\r\n    tunnel.current.material.map.offset.x += 0.01 * delta * 165\r\n    tunnel.current.material.map.offset.y += 0.005 * delta * 165\r\n    tunnel.current.material.map.repeat.set(repeatX.current, repeatY.current)\r\n    tunnel.current.material.emissive = mutation.globalColor\r\n    tunnel2.current.material.map.offset.x += 0.01 * delta * 165\r\n    tunnel2.current.material.map.offset.y += 0.005 * delta * 165\r\n    tunnel2.current.material.map.repeat.set(repeatX.current, repeatY.current)\r\n    tunnel2.current.material.emissive = mutation.globalColor\r\n\r\n\r\n    const scaleFactor = mutation.currentMusicLevel\r\n\r\n    if (scaleFactor > 0.8 && tunnels.current.scale.x > 0.95) {\r\n      tunnels.current.scale.x -= scaleFactor * delta * 1\r\n      tunnels.current.scale.y -= scaleFactor * delta * 1\r\n    } else if (tunnels.current.scale.x < 1) {\r\n      tunnels.current.scale.x += scaleFactor * delta * 0.5\r\n      tunnels.current.scale.y += scaleFactor * delta * 0.5\r\n    }\r\n  })\r\n\r\n  return (\r\n    <group ref={tunnels}>\r\n      <mesh ref={tunnel} position={[0, 0, -4300]} rotation={[0, -Math.PI / 2, Math.PI / 2]}>\r\n        <latheBufferGeometry args={[lathe, 50]} />\r\n        <meshStandardMaterial fog={false} attach=\"material\" side={BackSide} emissiveIntensity={0.4} emissive={COLORS[5].three} map={texture} />\r\n      </mesh>\r\n      <mesh visible={false} ref={tunnel2} position={[0, 0, -4300]} rotation={[0, -Math.PI / 2, Math.PI / 2]}>\r\n        <latheBufferGeometry args={[lathe2, 50]} />\r\n        <meshStandardMaterial fog={false} attach=\"material\" side={BackSide} emissiveIntensity={0.4} emissive={COLORS[5].three} map={texture} />\r\n      </mesh>\r\n    </group>\r\n  )\r\n}\r\n\r\nexport default function SuspendedHyperspaceTunnel() {\r\n  return (\r\n    <Suspense fallback={null}>\r\n      <HyperspaceTunnel />\r\n    </Suspense>\r\n  )\r\n}","import FixedCubes from './FixedCubes'\r\nimport Arch from './Arch'\r\nimport Hyperspace from './Hyperspace'\r\n\r\nexport default function CubeTunnel() {\r\n\r\n\r\n  return (\r\n    <>\r\n      <FixedCubes />\r\n      <Arch />\r\n      <Hyperspace />\r\n    </>\r\n  )\r\n}","import { useRef, useEffect } from 'react'\r\nimport { extend, useThree, useFrame } from '@react-three/fiber'\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass'\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\r\nimport { SSAOPass } from 'three/examples/jsm/postprocessing/SSAOPass'\r\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass'\r\nimport { AfterimagePass } from 'three/examples/jsm/postprocessing/AfterimagePass'\r\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader'\r\n\r\nimport { useStore, mutation } from '../state/useStore'\r\n\r\nextend({ EffectComposer, ShaderPass, RenderPass, UnrealBloomPass, SSAOPass, AfterimagePass })\r\n\r\n\r\n\r\n\r\nexport default function Effects() {\r\n  const composer = useRef()\r\n  const { scene, gl, size, camera } = useThree()\r\n\r\n  const bloomFactor = useRef(0)\r\n\r\n  const musicEnabled = useStore(s => s.musicEnabled)\r\n\r\n  useEffect(() => void composer.current.setSize(size.width, size.height), [size])\r\n  useFrame((state, delta) => {\r\n    if (musicEnabled) {\r\n      const bloom = composer.current.passes[1]\r\n\r\n      // const bloomFactor = mutation.currentMusicLevel\r\n      // console.log(bloomFactor)\r\n\r\n      if (mutation.currentMusicLevel > bloomFactor.current) {\r\n        bloomFactor.current = mutation.currentMusicLevel\r\n      } else {\r\n        bloomFactor.current -= delta * 0.5\r\n      }\r\n\r\n      bloom.strength = bloomFactor.current > 0.8 ? bloomFactor.current : 0.8\r\n      // bloom.radius = bloomFactor + 0.2 > 1 ? bloomFactor + 0.2 : 1\r\n    }\r\n    composer.current.render()\r\n  }, 1)\r\n\r\n\r\n  return (\r\n    <effectComposer ref={composer} args={[gl]}>\r\n      <renderPass attachArray=\"passes\" scene={scene} camera={camera} />\r\n      <unrealBloomPass attachArray=\"passes\" args={[undefined, 0.8 /* strength: 1 */, 1, 0.4 /* 0.4 */]} />\r\n      <shaderPass attachArray=\"passes\" args={[FXAAShader]} material-uniforms-resolution-value={[1 / size.width, 1 / size.height]} />\r\n    </effectComposer>\r\n  )\r\n}","import { useEffect } from 'react'\r\nimport { useStore } from '../state/useStore'\r\n\r\nconst pressed = []\r\n\r\nfunction useKeys(target, event, up = true) {\r\n  useEffect(() => {\r\n    const downHandler = (e) => {\r\n      if (target.indexOf(e.key) !== -1) {\r\n        const isRepeating = !!pressed[e.keyCode]\r\n        pressed[e.keyCode] = true\r\n        if (up || !isRepeating) event(true)\r\n      }\r\n    }\r\n\r\n    const upHandler = (e) => {\r\n      if (target.indexOf(e.key) !== -1) {\r\n        pressed[e.keyCode] = false\r\n        if (up) event(false)\r\n      }\r\n    }\r\n\r\n    window.addEventListener('keydown', downHandler, { passive: true })\r\n    window.addEventListener('keyup', upHandler, { passive: true })\r\n    return () => {\r\n      window.removeEventListener('keydown', downHandler)\r\n      window.removeEventListener('keyup', upHandler)\r\n    }\r\n  }, [target, event, up])\r\n}\r\n\r\nexport default function KeyboardControls() {\r\n  const set = useStore((state) => state.set)\r\n  useKeys(['ArrowLeft', 'a', 'A'], (left) => set((state) => ({ ...state, controls: { ...state.controls, left } })))\r\n  useKeys(['ArrowRight', 'd', 'D'], (right) => set((state) => ({ ...state, controls: { ...state.controls, right } })))\r\n\r\n  return null\r\n}","import { useEffect } from 'react'\r\nimport { useFrame } from '@react-three/fiber'\r\n\r\nimport { useStore, mutation } from '../state/useStore'\r\nimport { INITIAL_GAME_SPEED, PLANE_SIZE, LEVEL_SIZE } from '../constants'\r\n\r\n// this is supposedly a performance improvement\r\nconst shipSelector = s => s.ship\r\nconst setScoreSelector = s => s.setScore\r\nconst gameStartedSelector = s => s.gameStarted\r\nconst setIsSpeedingUpSelector = s => s.setIsSpeedingUp\r\nconst setGameOverSelector = s => s.setGameOver\r\n\r\nexport default function GameState() {\r\n  const ship = useStore(shipSelector)\r\n  const setScore = useStore(setScoreSelector)\r\n  const gameStarted = useStore(gameStartedSelector)\r\n  const setIsSpeedingUp = useStore(setIsSpeedingUpSelector)\r\n  const setGameOver = useStore(setGameOverSelector)\r\n\r\n  const level = useStore(s => s.level)\r\n\r\n  useEffect(() => {\r\n    mutation.currentLevelLength = -(level * PLANE_SIZE * LEVEL_SIZE)\r\n  }, [level])\r\n\r\n  useEffect(() => {\r\n    if (gameStarted) {\r\n      mutation.desiredSpeed = INITIAL_GAME_SPEED\r\n    }\r\n  }, [gameStarted])\r\n\r\n\r\n\r\n  useFrame((state, delta) => {\r\n\r\n    // acceleration logic\r\n    const accelDelta = 1 * delta * 0.15\r\n    if (gameStarted && !mutation.gameOver) {\r\n      if (mutation.gameSpeed < mutation.desiredSpeed) {\r\n        setIsSpeedingUp(true)\r\n        if (mutation.gameSpeed + accelDelta > mutation.desiredSpeed) {\r\n          mutation.gameSpeed = mutation.desiredSpeed\r\n        } else {\r\n          mutation.gameSpeed += accelDelta\r\n        }\r\n      } else {\r\n        setIsSpeedingUp(false)\r\n      }\r\n    }\r\n\r\n    if (ship.current) {\r\n      // sets the score counter in the hud\r\n      mutation.score = Math.abs(ship.current.position.z) - 10\r\n\r\n      // optimization, instead of calculating this for all elements we do it once per frame here\r\n      mutation.shouldShiftItems = ship.current.position.z < -400 && ship.current.position.z < mutation.currentLevelLength - 400 && ship.current.position.z > mutation.currentLevelLength - 1000\r\n    }\r\n\r\n    if (gameStarted && mutation.gameOver) {\r\n      setScore(Math.abs(ship.current.position.z) - 10)\r\n      setGameOver(true)\r\n    }\r\n  })\r\n\r\n  return null\r\n}","import { useFrame } from '@react-three/fiber'\r\nimport { useRef } from 'react'\r\n\r\nimport { COLORS } from '../constants'\r\n\r\nimport { mutation } from '../state/useStore'\r\n\r\n// handles gracefully fading all objects to the correct color depending on level\r\n// mutates state directly for performance reasons\r\nexport default function GlobalColor({ materialRef }) {\r\n  const colorAlpha = useRef(0)\r\n  const previousLevel = useRef(0)\r\n\r\n  const rainbowAlpha1 = useRef(0)\r\n  const rainbowAlpha2 = useRef(0)\r\n  const rainbowAlpha3 = useRef(0)\r\n  const rainbowAlpha4 = useRef(0)\r\n  const rainbowAlpha5 = useRef(0)\r\n\r\n  useFrame((state, delta) => {\r\n    // Make sure the first level is red\r\n    if (mutation.colorLevel === 0) {\r\n      mutation.globalColor.set(COLORS[0].three)\r\n    }\r\n\r\n    // Rainbow Level\r\n    if (mutation.colorLevel === 6) {\r\n      const rainbowSpeed = delta * 3\r\n\r\n      if (rainbowAlpha1.current < 1) {\r\n        rainbowAlpha1.current += rainbowSpeed\r\n        mutation.globalColor.lerpColors(COLORS[0].three, COLORS[2].three, rainbowAlpha1.current)\r\n      } else if (rainbowAlpha2.current < 1) {\r\n        rainbowAlpha2.current += rainbowSpeed\r\n        mutation.globalColor.lerpColors(COLORS[2].three, COLORS[3].three, rainbowAlpha2.current)\r\n      } else if (rainbowAlpha3.current < 1) {\r\n        rainbowAlpha3.current += rainbowSpeed\r\n        mutation.globalColor.lerpColors(COLORS[3].three, COLORS[1].three, rainbowAlpha3.current)\r\n      } else if (rainbowAlpha4.current < 1) {\r\n        rainbowAlpha4.current += rainbowSpeed\r\n        mutation.globalColor.lerpColors(COLORS[1].three, COLORS[5].three, rainbowAlpha4.current)\r\n      } else if (rainbowAlpha5.current < 1) {\r\n        rainbowAlpha5.current += rainbowSpeed\r\n        mutation.globalColor.lerpColors(COLORS[5].three, COLORS[0].three, rainbowAlpha5.current)\r\n      } else {\r\n        rainbowAlpha1.current = 0\r\n        rainbowAlpha2.current = 0\r\n        rainbowAlpha3.current = 0\r\n        rainbowAlpha4.current = 0\r\n        rainbowAlpha5.current = 0\r\n      }\r\n\r\n      previousLevel.current = 0\r\n\r\n      // regular levels\r\n    } else if (mutation.colorLevel > previousLevel.current) {\r\n      mutation.globalColor.lerpColors(COLORS[previousLevel.current].three, COLORS[mutation.colorLevel].three, colorAlpha.current)\r\n\r\n      if (colorAlpha.current + (delta * mutation.gameSpeed) * 0.5 > 1) {\r\n        colorAlpha.current = 1\r\n      } else {\r\n        colorAlpha.current += (delta * mutation.gameSpeed) * 0.5\r\n      }\r\n\r\n      if (colorAlpha.current === 1) {\r\n        previousLevel.current = mutation.colorLevel\r\n        colorAlpha.current = 0\r\n      }\r\n    }\r\n  })\r\n\r\n  return null\r\n}","export default __webpack_public_path__ + \"static/media/intro-loop.85c70e50.mp3\";","export default __webpack_public_path__ + \"static/media/main-nodrums.b36a5309.mp3\";","export default __webpack_public_path__ + \"static/media/main-onlydrums.f5b7b0b0.mp3\";","import { AudioListener, AudioLoader, AudioAnalyser } from 'three'\r\nimport { useRef, useEffect, useState, Suspense } from 'react'\r\nimport { useLoader, useFrame } from '@react-three/fiber'\r\nimport { MathUtils } from 'three'\r\n\r\n\r\nimport { mutation, useStore } from '../state/useStore'\r\n\r\nimport introSong from '../audio/intro-loop.mp3'\r\n\r\nimport mainSong from '../audio/main-nodrums.mp3'\r\nimport mainSongDrums from '../audio/main-onlydrums.mp3'\r\n\r\nfunction Music() {\r\n  const introPlayer = useRef()\r\n  const themePlayer = useRef()\r\n  const drumPlayer = useRef()\r\n\r\n  const soundOrigin = useRef()\r\n\r\n  const musicEnabled = useStore(s => s.musicEnabled)\r\n  const gameStarted = useStore(s => s.gameStarted)\r\n  const gameOver = useStore(s => s.gameOver)\r\n  const camera = useStore(s => s.camera)\r\n  const level = useStore(s => s.level)\r\n  const hasInteracted = useStore(s => s.hasInteracted)\r\n\r\n  const [listener] = useState(() => new AudioListener())\r\n\r\n  const introTheme = useLoader(AudioLoader, introSong)\r\n  const mainTheme = useLoader(AudioLoader, mainSong)\r\n  const mainThemeDrums = useLoader(AudioLoader, mainSongDrums)\r\n\r\n  const themeFilter = useRef()\r\n  const audioAnalyzer = useRef()\r\n\r\n  const introVolume = useRef(1)\r\n  const themeVolume = useRef(0)\r\n  const drumVolume = useRef(0)\r\n\r\n  const introPlaying = useRef(true)\r\n  const startCrossfade = useRef(false)\r\n\r\n  useEffect(() => {\r\n    if (hasInteracted && musicEnabled) {\r\n      introPlayer.current.context.resume()\r\n    }\r\n  }, [hasInteracted, musicEnabled])\r\n\r\n  useEffect(() => {\r\n    introPlayer.current.setBuffer(introTheme)\r\n  }, [introTheme])\r\n\r\n  // creates a lowpass filter with the browser audio API, also an audio analyzer\r\n  useEffect(() => {\r\n    themePlayer.current.setBuffer(mainTheme)\r\n    themeFilter.current = themePlayer.current.context.createBiquadFilter()\r\n    themeFilter.current.type = \"lowpass\"\r\n    themeFilter.current.frequency.value = 0\r\n    themePlayer.current.setFilter(themeFilter.current)\r\n\r\n  }, [mainTheme])\r\n\r\n  useEffect(() => {\r\n    drumPlayer.current.setBuffer(mainThemeDrums)\r\n\r\n    audioAnalyzer.current = new AudioAnalyser(drumPlayer.current, 32)\r\n  }, [mainThemeDrums])\r\n\r\n  useEffect(() => {\r\n    if (!musicEnabled) {\r\n      if (introPlayer.current?.isPlaying) {\r\n        introPlayer.current.stop()\r\n      }\r\n\r\n      if (themePlayer.current?.isPlaying) {\r\n        themePlayer.current.stop()\r\n        drumPlayer.current.stop()\r\n      }\r\n\r\n    }\r\n  }, [musicEnabled])\r\n\r\n  useEffect(() => {\r\n    if (musicEnabled && !gameOver) {\r\n      if (!introPlayer.current.isPlaying) {\r\n        introPlayer.current.play()\r\n        introPlaying.current = true\r\n      }\r\n    } else {\r\n      if (introPlayer.current?.isPlaying) {\r\n        introPlayer.current.stop()\r\n      }\r\n    }\r\n\r\n    introPlayer.current.setLoop(true)\r\n    themePlayer.current.setLoop(true)\r\n    drumPlayer.current.setLoop(true)\r\n\r\n    if (camera.current) {\r\n      const cam = camera.current\r\n      cam.add(listener)\r\n      return () => cam.remove(listener)\r\n    }\r\n\r\n  }, [musicEnabled, introTheme, mainTheme, mainThemeDrums, gameStarted, gameOver, camera, listener])\r\n\r\n  useEffect(() => {\r\n    if (level > 0 && level % 2 === 0) {\r\n      themePlayer.current.setPlaybackRate(1 + level * 0.02)\r\n      drumPlayer.current.setPlaybackRate(1 + level * 0.02)\r\n    } else if (level === 0) {\r\n      themePlayer.current.setPlaybackRate(1)\r\n      drumPlayer.current.setPlaybackRate(1)\r\n    }\r\n  }, [level])\r\n\r\n  useFrame((state, delta) => {\r\n    if (musicEnabled) {\r\n\r\n      if (audioAnalyzer.current) {\r\n        const audioLevel = MathUtils.inverseLerp(0, 255, audioAnalyzer.current.getFrequencyData()[0])\r\n        mutation.currentMusicLevel = audioLevel\r\n      }\r\n\r\n      // start playing main theme \"on the beat\" when game starts\r\n      if (gameStarted && !themePlayer.current.isPlaying) {\r\n        if (introPlayer.current.context.currentTime.toFixed(1) % 9.6 === 0) {\r\n          startCrossfade.current = true\r\n          themePlayer.current.play()\r\n          drumPlayer.current.play()\r\n          themePlayer.current.setVolume(0)\r\n          drumPlayer.current.setVolume(0)\r\n        }\r\n      }\r\n\r\n      // crossfade intro music to main theme when game starts\r\n      if (gameStarted && !gameOver && themeVolume.current < 1) {\r\n        if (!themePlayer.current.isPlaying) {\r\n          themePlayer.current.play()\r\n          drumPlayer.current.play()\r\n        }\r\n\r\n        themeFilter.current.frequency.value += delta * 4000\r\n\r\n        if (themeVolume.current + delta * 0.2 > 1) {\r\n          themeVolume.current = 1\r\n          drumVolume.current = 1\r\n        } else {\r\n          themeVolume.current += delta * 0.2\r\n          drumVolume.current += delta * 0.2\r\n        }\r\n\r\n        if (introVolume.current - delta * 0.2 < 0) {\r\n          introVolume.current = 0\r\n        } else {\r\n          introVolume.current -= delta * 0.2\r\n        }\r\n\r\n        introPlayer.current.setVolume(introVolume.current)\r\n        themePlayer.current.setVolume(themeVolume.current)\r\n        drumPlayer.current.setVolume(drumVolume.current)\r\n      }\r\n\r\n\r\n      // Crossfade main theme back to intro on game over\r\n      if (gameOver && introVolume.current < 1) {\r\n        if (!introPlayer.current.isPlaying) {\r\n          introPlayer.current.play()\r\n        }\r\n\r\n        themeFilter.current.frequency.value -= delta * 4000\r\n\r\n        if (themeVolume.current - delta * 0.2 < 0) {\r\n          themeVolume.current = 0\r\n          drumVolume.current = 0\r\n        } else {\r\n          themeVolume.current -= delta * 0.2\r\n          drumVolume.current -= delta * 0.2\r\n        }\r\n\r\n        if (introVolume.current + delta * 0.2 > 1) {\r\n          introVolume.current = 1\r\n        } else {\r\n          introVolume.current += delta * 0.2\r\n        }\r\n\r\n        introPlayer.current.setVolume(introVolume.current)\r\n        themePlayer.current.setVolume(themeVolume.current)\r\n        drumPlayer.current.setVolume(drumVolume.current)\r\n      }\r\n    }\r\n  })\r\n\r\n  return (\r\n    <group ref={soundOrigin}>\r\n      <audio ref={introPlayer} args={[listener]} />\r\n      <audio ref={themePlayer} args={[listener]} />\r\n      <audio ref={drumPlayer} args={[listener]} />\r\n    </group>\r\n  )\r\n}\r\n\r\nexport default function SuspenseMusic() {\r\n\r\n  return (\r\n    <Suspense fallback={null}>\r\n      <Music />\r\n    </Suspense>\r\n  )\r\n}","export default __webpack_public_path__ + \"static/media/speedup.d71ead93.mp3\";","import { AudioListener, AudioLoader } from 'three'\r\nimport { useRef, useEffect, useState, Suspense } from 'react'\r\nimport { useLoader } from '@react-three/fiber'\r\n\r\nimport { useStore } from '../state/useStore'\r\n\r\nimport speedUp from '../audio/speedup.mp3'\r\n\r\nfunction Sound() {\r\n  const sound = useRef()\r\n  const soundOrigin = useRef()\r\n\r\n\r\n  const camera = useStore(s => s.camera)\r\n  const musicEnabled = useStore(s => s.musicEnabled)\r\n  const level = useStore(s => s.level)\r\n  const gameStarted = useStore(s => s.gameStarted)\r\n\r\n  const [listener] = useState(() => new AudioListener())\r\n\r\n  const speedUpSound = useLoader(AudioLoader, speedUp)\r\n\r\n\r\n  useEffect(() => {\r\n    sound.current.setBuffer(speedUpSound)\r\n\r\n    if (musicEnabled) {\r\n      sound.current.setVolume(0.5)\r\n    } else {\r\n      sound.current.setVolume(0)\r\n    }\r\n\r\n    if (camera.current) {\r\n      const cam = camera.current\r\n      cam.add(listener)\r\n      return () => cam.remove(listener)\r\n    }\r\n  }, [speedUpSound, musicEnabled, camera, listener])\r\n\r\n  useEffect(() => {\r\n    if (gameStarted && level > 0) {\r\n      sound.current.setBuffer(speedUpSound)\r\n      sound.current.play()\r\n    }\r\n  }, [gameStarted, level, speedUpSound])\r\n\r\n  return (\r\n    <group ref={soundOrigin}>\r\n      <audio ref={sound} args={[listener]} />\r\n    </group>\r\n  )\r\n}\r\n\r\nexport default function SuspenseSound() {\r\n\r\n  return (\r\n    <Suspense fallback={null}>\r\n      <Sound />\r\n    </Suspense>\r\n  )\r\n}","import * as React from 'react'\r\n\r\nconst defaultDataInterpolation = (p) => `Loading: ${p.toFixed(0)}%`\r\n\r\nexport default function CustomLoader({ active, progress, dataInterpolation = defaultDataInterpolation }) {\r\n  const progressRef = React.useRef(0)\r\n  const rafRef = React.useRef(0)\r\n  const progressSpanRef = React.useRef(null)\r\n\r\n  const updateProgress = React.useCallback(() => {\r\n    if (!progressSpanRef.current) return\r\n    progressRef.current += (progress - progressRef.current) / 2\r\n    if (progressRef.current > 0.95 * progress || progress === 100) progressRef.current = progress\r\n    progressSpanRef.current.innerText = dataInterpolation(progressRef.current)\r\n    if (progressRef.current < progress) rafRef.current = requestAnimationFrame(updateProgress)\r\n  }, [dataInterpolation, progress])\r\n\r\n  React.useEffect(() => {\r\n    updateProgress()\r\n    return () => cancelAnimationFrame(rafRef.current)\r\n  }, [updateProgress])\r\n\r\n  return (\r\n    <div style={{ ...styles.container, opacity: active ? 1 : 0 }}>\r\n      <div>\r\n        <div style={{ ...styles.inner }}>\r\n          <div style={{ ...styles.bar, transform: `scaleX(${progress / 100})` }}></div>\r\n          <div style={{ marginTop: '1.5rem' }}>\r\n            <span ref={progressSpanRef} style={{ ...styles.data }} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst styles = {\r\n  container: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    transition: 'opacity 300ms ease',\r\n    zIndex: 1000,\r\n  },\r\n  inner: {\r\n    width: 206,\r\n    height: 26,\r\n    textAlign: 'center',\r\n    borderRadius: '5px',\r\n    boxShadow: '0 0 20px 0px #fe2079',\r\n    border: '3px solid #fe2079'\r\n  },\r\n  bar: {\r\n    height: 20,\r\n    width: '100%',\r\n    background: '#fe2079',\r\n    transition: 'transform 200ms',\r\n    transformOrigin: 'left center',\r\n    boxShadow: '0 0 20px 0px #fe2079'\r\n  },\r\n  data: {\r\n    textAlign: 'center',\r\n    fontVariantNumeric: 'tabular-nums',\r\n    marginTop: '2rem',\r\n    color: '#f0f0f0',\r\n    fontSize: '2em',\r\n    fontFamily: `'Commando', mono, monospace, -apple-system, BlinkMacSystemFont, \"Inter\", \"Segoe UI\", \"Helvetica Neue\", Helvetica, Arial, Roboto, Ubuntu, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`,\r\n    whiteSpace: 'nowrap',\r\n    textShadow: '0 0 20px #fe2079'\r\n  },\r\n}\r\n","import '../../styles/author.css'\r\n\r\nexport default function Author() {\r\n  return (\r\n    <div className=\"author\">\r\n      <a target=\"_blank\" rel=\"noreferrer\" href=\"https://adamkarlsten.com\">{`ad<amkarlsten.com`}</a>\r\n    </div>\r\n  )\r\n}","import { useProgress } from '@react-three/drei'\r\nimport { useState, useEffect } from 'react'\r\n\r\nimport Loader from './CustomLoader'\r\nimport Author from './Author'\r\n\r\nimport '../../styles/gameMenu.css'\r\n\r\nimport { useStore } from '../../state/useStore'\r\n\r\nconst Overlay = () => {\r\n  const [shown, setShown] = useState(true)\r\n  const [opaque, setOpaque] = useState(true)\r\n  const [hasLoaded, setHasLoaded] = useState(false)\r\n  const { active, progress } = useProgress()\r\n\r\n  const gameStarted = useStore(s => s.gameStarted)\r\n  const gameOver = useStore(s => s.gameOver)\r\n  const setGameStarted = useStore(s => s.setGameStarted)\r\n  const musicEnabled = useStore(s => s.musicEnabled)\r\n  const enableMusic = useStore(s => s.enableMusic)\r\n  const setHasInteracted = useStore(s => s.setHasInteracted)\r\n\r\n  useEffect(() => {\r\n    if (gameStarted || gameOver) {\r\n      setShown(false)\r\n    } else if (!gameStarted) {\r\n      setShown(true)\r\n    }\r\n  }, [gameStarted, active, gameOver])\r\n\r\n  useEffect(() => {\r\n    let t\r\n    if (hasLoaded === opaque) t = setTimeout(() => setOpaque(!hasLoaded), 300)\r\n    return () => clearTimeout(t)\r\n  }, [hasLoaded, opaque])\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('musicEnabled', JSON.stringify(musicEnabled))\r\n  }, [musicEnabled])\r\n\r\n  useEffect(() => {\r\n    if (progress >= 100) {\r\n      setHasLoaded(true)\r\n    }\r\n  }, [progress])\r\n\r\n  const handleStart = () => {\r\n    setGameStarted(true)\r\n  }\r\n\r\n  const handleMusic = () => {\r\n    enableMusic(!musicEnabled)\r\n  }\r\n\r\n  return shown ? (\r\n    <div onClick={() => setHasInteracted()} className={`game__container`} style={{ opacity: shown ? 1 : 0, background: opaque ? '#141622FF' : '#141622CC' }}>\r\n      <div className=\"game__menu\">\r\n        <img className=\"game__logo\" src=\"cuberun-logo.png\" alt=\"Cuberun Logo\" />\r\n        <div className=\"game__subcontainer\">\r\n          {!hasLoaded ? (\r\n            <Loader active={active} progress={progress} />\r\n          ) : (\r\n            <>\r\n              <button onClick={handleStart} className=\"game__menu-button\">{'STA>RT'}</button>\r\n              <div className=\"game__menu-options\">\r\n                <button onClick={handleMusic} className=\"game__menu-button game__menu-button-music\">{`TURN MUSIC ${musicEnabled ? 'OF>F' : 'O<N'}`}</button>\r\n                <span className=\"game__menu-controls\">\r\n                  <p>Controls</p>\r\n                  ← a / d →\r\n                </span>\r\n                <span className=\"game__menu-warning\">Photosensitivity warning - Game contains flashing lights</span>\r\n                <Author />\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div >\r\n  ) : null\r\n}\r\n\r\nexport default Overlay","import { useEffect, useState, useRef } from 'react'\r\nimport { isMobile } from 'react-device-detect'\r\nimport { addEffect } from '@react-three/fiber'\r\n\r\nimport { useStore, mutation } from '../../state/useStore'\r\n\r\nimport '../../styles/hud.css'\r\n\r\nconst getSpeed = () => `${(mutation.gameSpeed * 400).toFixed(0)}`\r\nconst getScore = () => `${mutation.score.toFixed(0)}`\r\n\r\n\r\nexport default function Hud() {\r\n  const set = useStore((state) => state.set)\r\n  const level = useStore(s => s.level)\r\n\r\n  const gameOver = useStore(s => s.gameOver)\r\n  const gameStarted = useStore(s => s.gameStarted)\r\n  const isSpeedingUp = useStore(s => s.isSpeedingUp)\r\n\r\n  const [shown, setShown] = useState(false)\r\n\r\n  const [showControls, setShowControls] = useState(false)\r\n  const [left, setLeftPressed] = useState(false)\r\n  const [right, setRightPressed] = useState(false)\r\n\r\n\r\n  // performance optimization for the rapidly updating speedometer and score - see https://github.com/pmndrs/racing-game/blob/main/src/ui/Speed/Text.tsx\r\n  let then = Date.now()\r\n\r\n  const speedRef = useRef()\r\n  const scoreRef = useRef()\r\n\r\n  let currentSpeed = getSpeed()\r\n  let currentScore = getScore()\r\n\r\n  useEffect(() => addEffect(() => {\r\n    const now = Date.now()\r\n\r\n    if (now - then > 33.3333) { // throttle these to a max of 30 updates/sec\r\n      if (speedRef.current) {\r\n        speedRef.current.innerText = getSpeed()\r\n      }\r\n\r\n      if (scoreRef.current) {\r\n        scoreRef.current.innerText = getScore()\r\n      }\r\n\r\n      // eslint-disable-next-line\r\n      then = now\r\n    }\r\n  }))\r\n\r\n  useEffect(() => {\r\n    if (showControls) {\r\n      window.oncontextmenu = function (event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        return false;\r\n      }\r\n    }\r\n  }, [showControls])\r\n\r\n  useEffect(() => {\r\n    if (gameStarted && !gameOver) {\r\n      setShown(true)\r\n    } else {\r\n      setShown(false)\r\n    }\r\n  }, [gameStarted, gameOver])\r\n\r\n  useEffect(() => {\r\n    if (isMobile) {\r\n      setShowControls(true)\r\n    } else {\r\n      setShowControls(false)\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    set((state) => ({ ...state, controls: { ...state.controls, left } }))\r\n  }, [set, left])\r\n\r\n  useEffect(() => {\r\n    set((state) => ({ ...state, controls: { ...state.controls, right } }))\r\n  }, [set, right])\r\n\r\n  return shown ? (\r\n    <div className=\"hud\">\r\n      {level > 0 && isSpeedingUp && (\r\n        <div className=\"center\">\r\n          <h3 className=\"center__speedup\">SPEED UP</h3>\r\n        </div>\r\n      )}\r\n      {showControls && (\r\n        <div className=\"controls\">\r\n          <button onTouchStart={() => setLeftPressed(true)} onTouchEnd={() => setLeftPressed(false)} className={`control control__left ${left ? 'control-active' : ''}`}>{'<'}</button>\r\n          <button onTouchStart={() => setRightPressed(true)} onTouchEnd={() => setRightPressed(false)} className={`control control__right ${right ? 'control-active' : ''}`}>{'>'}</button>\r\n        </div>\r\n      )}\r\n      <div className=\"bottomLeft\">\r\n        <div className={`score ${showControls ? 'score__withcontrols' : ''}`}>\r\n          <h3 className=\"score__title\">LEVEL</h3>\r\n          <h1 className=\"score__number\">{level + 1}</h1>\r\n          <h3 className=\"score__title\">KM/H</h3>\r\n          <h1 ref={speedRef} className=\"score__number\">{currentSpeed}</h1>\r\n          <h3 className=\"score__title\">SCORE</h3>\r\n          <h1 ref={scoreRef} className=\"score__number\">{currentScore}</h1>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ) : null\r\n}","export default __webpack_public_path__ + \"static/media/cuberun-logo.2a67aff7.png\";","import { useState, useEffect } from 'react'\r\n\r\nimport cubeRunLogo from '../../textures/cuberun-logo.png'\r\n\r\nimport '../../styles/gameMenu.css'\r\n\r\nimport { useStore } from '../../state/useStore'\r\n\r\nconst GameOverScreen = () => {\r\n  const previousScores = localStorage.getItem('highscores') ? JSON.parse(localStorage.getItem('highscores')) : [...Array(3).fill(0)]\r\n  const [shown, setShown] = useState(false)\r\n  const [opaque, setOpaque] = useState(false)\r\n  const [highScores, setHighscores] = useState(previousScores)\r\n\r\n  const gameOver = useStore(s => s.gameOver)\r\n  const score = useStore(s => s.score)\r\n\r\n  useEffect(() => {\r\n    let t\r\n    if (gameOver !== opaque) t = setTimeout(() => setOpaque(gameOver), 500)\r\n    return () => clearTimeout(t)\r\n  }, [gameOver, opaque])\r\n\r\n  useEffect(() => {\r\n    if (gameOver) {\r\n      setShown(true)\r\n    } else {\r\n      setShown(false)\r\n    }\r\n  }, [gameOver])\r\n\r\n  useEffect(() => {\r\n    if (gameOver) {\r\n      if (highScores.some(previousScore => score > previousScore)) {\r\n        const sortedScores = highScores.sort((a, b) => a - b)\r\n        sortedScores[0] = score.toFixed(0)\r\n        const resortedScores = sortedScores.sort((a, b) => b - a)\r\n\r\n        setHighscores(resortedScores)\r\n        localStorage.setItem('highscores', JSON.stringify(resortedScores))\r\n      }\r\n    }\r\n  }, [gameOver, highScores, score])\r\n\r\n  const handleRestart = () => {\r\n    window.location.reload() // TODO: make a proper restart\r\n  }\r\n\r\n  return shown ? (\r\n    <div className=\"game__container\" style={{ opacity: shown ? 1 : 0, background: opaque ? '#141622FF' : '#141622CC' }}>\r\n      <div className=\"game__menu\">\r\n        <img className=\"game__logo-small\" width=\"512px\" src={cubeRunLogo} alt=\"Cuberun Logo\" />\r\n        <h1 className=\"game__score-gameover\">GAME OVER</h1>\r\n        <div className=\"game__scorecontainer\">\r\n          <div className=\"game__score-left\">\r\n            <h1 className=\"game__score-title\">SCORE</h1>\r\n            <h1 className=\"game__score\">{score.toFixed(0)}</h1>\r\n          </div>\r\n          <div className=\"game__score-right\">\r\n            <h1 className=\"game__score-title\">HIGH SCORES</h1>\r\n            {highScores.map((newScore, i) => (\r\n              <div key={`${i}-${score}`} className=\"game__score-highscore\">\r\n                <span className=\"game__score-number\">{i + 1}</span>\r\n                <span style={{ textDecoration: score.toFixed(0) === newScore ? 'underline' : 'none' }} className=\"game__score-score\">{newScore > 0 ? newScore : '-'}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <button onClick={handleRestart} className=\"game__menu-button\">RESTART</button>\r\n      </div>\r\n    </div>\r\n  ) : null\r\n}\r\n\r\nexport default GameOverScreen","import { Canvas } from '@react-three/fiber'\r\nimport { Suspense } from 'react'\r\nimport { Preload } from '@react-three/drei'\r\n\r\nimport { useStore } from '../state/useStore'\r\n\r\n// THREE components\r\nimport Ship from './Ship'\r\nimport Ground from './Ground'\r\nimport Skybox from './Skybox'\r\nimport Cubes from './Cubes'\r\nimport Walls from './Walls'\r\nimport CubeTunnel from './CubeTunnel'\r\nimport Effects from './Effects'\r\n\r\n// State/dummy components\r\nimport KeyboardControls from './KeyboardControls'\r\nimport GameState from './GameState'\r\nimport GlobalColor from './GlobalColor'\r\nimport Music from './Music'\r\nimport Sound from './Sound'\r\n\r\n// HTML components\r\nimport Overlay from './html/Overlay'\r\nimport Hud from './html/Hud'\r\nimport GameOverScreen from './html/GameOverScreen'\r\n\r\n\r\nexport default function CubeWorld({ color, bgColor }) {\r\n  const directionalLight = useStore((s) => s.directionalLight)\r\n\r\n  return (\r\n    <>\r\n      <Canvas gl={{ antialias: false, alpha: false }} mode=\"concurrent\" dpr={[1, 1.5]} style={{ background: `${bgColor}` }}>\r\n        <Suspense fallback={null}>\r\n          <GameState />\r\n          <Skybox />\r\n          <directionalLight\r\n            ref={directionalLight}\r\n            intensity={3}\r\n            position={[0, Math.PI, 0]}\r\n          />\r\n          <ambientLight intensity={0.1} />\r\n          <Ship>\r\n            {directionalLight.current && <primitive object={directionalLight.current.target} />}\r\n          </Ship>\r\n          <Walls />\r\n          <Cubes />\r\n          <CubeTunnel />\r\n          <Ground groundColor={bgColor} />\r\n          <KeyboardControls />\r\n          <Effects />\r\n          <GlobalColor />\r\n          <Music />\r\n          <Sound />\r\n          <Preload all />\r\n        </Suspense>\r\n      </Canvas>\r\n      <Hud />\r\n      <GameOverScreen />\r\n      <Overlay />\r\n    </>\r\n  )\r\n}\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\n\r\nimport './styles/normalize.css'\r\nimport './styles/index.css';\r\n\r\nimport CubeWorld from './components/CubeWorld';\r\n\r\n// ReactDOM.render(\r\n//   <React.StrictMode>\r\n//     <CubeWorld bgColor='#141622' />\r\n//   </React.StrictMode>,\r\n//   document.getElementById('root')\r\n// );\r\n\r\nReactDOM.createRoot(document.getElementById('root')).render(\r\n  <React.StrictMode>\r\n    <CubeWorld bgColor='#141622' />\r\n  </React.StrictMode>\r\n)"],"sourceRoot":""}